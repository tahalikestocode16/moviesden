<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Movies Den</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>

 @font-face {
  font-family: soft;
  src: url("LeagueSpartan-Bold.otf");
 }
   

:root {
    --pink: #ff2a6d;
    --green: #28a745;
    --bg: #020212;
    --text: #ffffff;
    --card: #0c0c1c;
    --soft: #111122;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:'Arial',sans-serif;}

/* Global Stylized Scrollbar */
html {
    scrollbar-width: thin; /* Firefox */
    scrollbar-color: #ff2a6d #1a1525; /* Firefox: thumb and track */
}

/* Webkit Scrollbar (Chrome, Safari, Edge) */
::-webkit-scrollbar {
    width: 12px;
    height: 12px;
}

::-webkit-scrollbar-track {
    background: #1a1525;
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #ff2a6d, #8a2be2);
    border-radius: 10px;
    border: 2px solid #1a1525;
    transition: all 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, #ff4a7d, #9a3bf2);
    box-shadow: 0 0 10px rgba(255, 42, 109, 0.5);
}

/* Corner where scrollbars meet */
::-webkit-scrollbar-corner {
    background: #1a1525;
}

body{background:var(--bg);color:var(--text);overflow-x:hidden;scroll-behavior:smooth;width:100%;max-width:100vw;}

/* Global mobile fix */
@media (max-width: 768px) {
    html, body {
        overflow-x: hidden !important;
        width: 100% !important;
        max-width: 100vw !important;
        position: relative;
    }
    
    * {
        max-width: 100%;
    }
    
    img {
        max-width: 100%;
        height: auto;
    }
}


* {
  font-family: soft;
}
/* NAV */
nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 0;
    position: relative;
    backdrop-filter: blur(10px);
    background: rgba(0, 0, 0, 0.3);
    border-radius: 15px;
    margin-bottom: 20px;
    z-index: 10;
}

nav .logo {
    display: flex;
    align-items: center;
    font-size: 32px;
    font-weight: 700;
    z-index: 1501;
    transition: all 0.3s ease;
    color: white;
    text-decoration: none;
}

nav .logo:hover {
    transform: scale(1.05);
}

nav .logo img {
    width: 40px;
    margin-right: 10px;
    filter: drop-shadow(0 0 10px rgba(255, 42, 109, 0.5));
    transition: transform 0.3s ease;
}

nav .logo:hover img {
    transform: rotate(360deg);
}

nav .logo .name {
    color: #ff2a6d;
}

nav .navlinks {
    display: flex;
    list-style: none;
    gap: 30px;
    align-items: center;
    position: relative;
    gap: 5px;
}

/* Sliding background element */
nav .navlinks .sliding-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 100%;
    background: #ff2a6d;
    border: 1.5px solid #ff2a6d;
    border-radius: 999px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 0;
    opacity: 0;
    pointer-events: none;
}

nav .navlinks a {
    text-decoration: none;
    color: white;
    font-size: 16px;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    white-space: nowrap;
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 8px 18px;
    border-radius: 999px;
    background: transparent;
    border: 1.5px solid transparent;
    font-weight: 500;
    overflow: visible;
    z-index: 1;
}

nav .navlinks a::after {
    display: none; /* Remove underline effect */
}

nav .navlinks a::before {
    display: none;
}

nav .navlinks a:hover {
    color: white;
    font-weight: 600;
    transform: translateY(-3px) scale(1.05);
    z-index: 2;
    border-color: transparent;
}

nav .navlinks a:active {
    transform: translateY(-1px) scale(1.02);
}

/* Remove default active state from home button */
nav .navlinks a.home-btn {
    background: transparent;
    border-color: transparent;
    color: white;
    font-weight: 500;
    box-shadow: none;
}

nav .icons {
    display: flex;
    gap: 20px;
    font-size: 22px;
    cursor: pointer;
    align-items: center;
    z-index: 1501;
}

/* Hide hamburger on large screens */
#bar {
    display: none;
    font-size: 26px;
    transition: all 0.3s ease;
    color: white;
    cursor: pointer;
}

#bar:hover {
    color: #ff2a6d;
    transform: scale(1.1);
}

/* Cart icon styling */
.cart-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    border-radius: 999px;
    background: rgba(255, 42, 109, 0.15);
    border: 1px solid rgba(255, 42, 109, 0.65);
    font-size: 15px;
    color: white;
    text-decoration: none;
}

.cart-link span#cartCount {
    min-width: 20px;
    height: 20px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 999px;
    background: #ff2a6d;
    color: #fff;
    font-size: 12px;
    font-weight: 700;
}

.cart-link:hover {
    background: rgba(255, 42, 109, 0.3);
    transform: translateY(-1px);
    transition: 0.2s ease;
}

.icons a {
    color: white;
    text-decoration: none;
    transition: 0.3s;
}

.icons a:hover {
    scale: 1.2;
}

/* Search Input Wrapper */
.search-input-wrapper {
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%) scale(0.8);
    width: 0;
    opacity: 0;
    overflow: hidden;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 10;
    transform-origin: right center;
}

.icons.search-expanded .search-input-wrapper {
    width: 350px;
    opacity: 1;
    transform: translateY(-50%) scale(1);
    margin-right: 10px;
}

.searchInput {
    width: 100%;
    padding: 10px 16px;
    border-radius: 999px;
    border: 1px solid rgba(255, 42, 109, 0.4);
    background: rgba(14, 12, 22, 0.98);
    color: white;
    outline: none;
    font-size: 0.9rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.searchInput:focus {
    border-color: #ff2a6d;
    box-shadow: 0 4px 16px rgba(255, 42, 109, 0.4);
}

#search {
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: center;
}

.icons.search-expanded #search {
    opacity: 0;
    transform: scale(0) rotate(90deg);
    pointer-events: none;
}

/* Desktop - wider search */
@media (min-width: 1200px) {
    .icons.search-expanded .search-input-wrapper {
        width: 400px;
    }
}

/* Tablet */
@media (max-width: 900px) {
    .icons.search-expanded .search-input-wrapper {
        width: 300px;
    }
}

/* Mobile - Full navbar width */
@media (max-width: 768px) {
    nav {
        position: relative;
    }
    
    nav .navlinks {
        position: absolute;
        top: 60px;
        right: 16px;
        background: rgba(8, 8, 12, 0.98);
        border-radius: 12px;
        padding: 16px 20px;
        display: none;
        flex-direction: column;
        gap: 0;
        min-width: 200px;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.8);
        z-index: 10002;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 42, 109, 0.2);
    }
    
    nav .navlinks.show {
        display: flex;
        animation: slideDown 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-20px) scale(0.95);
        }
        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }
    
    nav .navlinks a {
        font-size: 15px;
        width: 100%;
        text-align: left;
        padding: 12px 8px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        color: white !important;
        z-index: 10003;
        position: relative;
    }
    
    nav .navlinks a:last-child {
        border-bottom: none;
    }
    
    nav .navlinks a::after {
        display: none;
    }
    
    nav .navlinks a:hover {
        transform: translateX(5px);
        padding-left: 12px;
    }
    
    nav .icons {
        font-size: 20px;
        gap: 16px;
        align-items: center;
    }
    
    .cart-link {
        font-size: 14px;
        padding: 5px 8px;
    }
    
    #bar {
        display: inline-block;
        z-index: 10001;
        position: relative;
        padding: 8px;
        background: rgba(255, 42, 109, 0.2);
        border-radius: 6px;
        border: 1px solid rgba(255, 42, 109, 0.4);
    }
    
    #bar:hover {
        background: rgba(255, 42, 109, 0.3);
        border-color: rgba(255, 42, 109, 0.6);
    }
    
    .icons.search-expanded .search-input-wrapper {
        position: fixed;
        left: 5vw;
        right: 5vw;
        top: 15px;
        width: auto;
        transform: scale(1);
        margin-right: 0;
    }
    
    .icons.search-expanded #search {
        opacity: 0;
        transform: scale(0);
    }
    
    .searchInput {
        padding: 10px 16px;
        font-size: 0.9rem;
    }
}

@media (max-width: 600px) {
    .icons.search-expanded .search-input-wrapper {
        left: 3vw;
        right: 3vw;
    }
    
    .searchInput {
        padding: 9px 14px;
        font-size: 0.85rem;
    }
}

@media (max-width: 400px) {
    nav {
        padding: 6px 4px;
        gap: 4px;
        overflow: visible;
    }
    
    nav .logo {
        font-size: 16px;
        flex: 1 1 auto;
        min-width: 0;
        max-width: calc(100% - 120px);
    }
    
    nav .logo img {
        width: 20px;
        margin-right: 4px;
    }
    
    nav .logo h3.name {
        font-size: 14px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 100px;
    }
    
    nav .icons {
        font-size: 14px;
        gap: 4px;
        flex-shrink: 0;
        align-items: center;
    }
    
    #bar {
        padding: 5px 6px;
        font-size: 16px;
        min-width: 28px;
        min-height: 28px;
        line-height: 1;
    }
    
    .cart-link {
        font-size: 10px;
        padding: 3px 5px;
    }
    
    .cart-link span#cartCount {
        min-width: 12px;
        height: 12px;
        font-size: 8px;
    }
    
    nav .icons a {
        font-size: 14px;
    }
    
    nav .navlinks {
        right: 10px;
        left: 10px;
        min-width: auto;
        width: calc(100vw - 20px);
        max-width: calc(100vw - 20px);
        top: 55px;
        box-sizing: border-box;
    }
    
    nav {
        max-width: calc(100vw - 20px);
        box-sizing: border-box;
    }
    
    .hero {
        width: calc(100% - 20px);
        max-width: calc(100vw - 20px);
    }
    
    .container {
        padding: 0 8px;
        width: 100%;
        max-width: 100%;
    }
    
    .filter-bar {
        width: calc(100% - 20px);
        max-width: calc(100vw - 20px);
        padding: 8px;
    }
    
    .categories {
        padding: 0 8px;
        width: 100%;
        max-width: 100%;
    }
    
    .movie-card {
        width: 140px;
        min-width: 140px;
        max-width: 140px;
    }
    
    .movie-card img {
        height: 180px;
    }
    
    nav .navlinks a {
        font-size: 13px;
        padding: 10px 12px;
    }
}

/* HERO CAROUSEL */
.hero{
    width:100%;
    max-width:100%;
    height:480px;
    background-size:cover;
    background-position:center;
    position:relative;
    overflow:hidden;
    margin-top: 20px;
    border-radius: 24px;
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(255, 42, 109, 0.1);
    padding: 0;
    box-sizing: border-box;
}

.hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(180deg, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.4) 50%, rgba(0, 0, 0, 0.85) 100%);
    z-index: 1;
}

.hero::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 30% 50%, rgba(255, 42, 109, 0.15) 0%, transparent 60%);
    z-index: 1;
    pointer-events: none;
}

.hero-slide{
    width:100%;
    height:100%;
    position:absolute;
    top:0;
    left:0;
    background-size:cover;
    background-position:center;
    opacity:0;
    transition:opacity 2s cubic-bezier(0.4, 0, 0.2, 1), transform 2s cubic-bezier(0.4, 0, 0.2, 1);
    transform:scale(1.15);
    filter: brightness(0.9);
}

.hero-slide.active{
    opacity:1;
    transform:scale(1);
    filter: brightness(1);
}

.hero .overlay{
    position:absolute;
    bottom:60px;
    left:60px;
    right:60px;
    width:auto;
    max-width:100%;
    display:flex;
    align-items:flex-end;
    justify-content:space-between;
    gap:40px;
    padding:0;
    z-index: 2;
    box-sizing: border-box;
    animation: fadeInUp 1s ease-out 0.3s both;
}

.hero .overlay .left {
    flex: 1;
    max-width: 700px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 0;
}

.hero .overlay .title {
    font-size: 60px;
    font-weight: 900;
    background: linear-gradient(135deg, #ffffff 0%, #ff2a6d 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: titleGlow 3s ease-in-out infinite;
    text-shadow: 0 0 30px rgba(255, 42, 109, 0.3);
    margin: 0;
    line-height: 1.1;
}

@keyframes titleGlow {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.2); }
}

.hero .overlay .meta {
    margin: 15px 0;
    font-size: 20px;
    opacity: 0.9;
    letter-spacing: 1px;
    color: rgba(255, 255, 255, 0.95);
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

.hero .overlay .stars {
    margin: 10px 0;
    font-size: 22px;
    animation: starPulse 2s ease-in-out infinite;
    color: gold;
    display: flex;
    gap: 4px;
    justify-content: flex-start;
}

@keyframes starPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

.hero .overlay .desc {
    margin-top: 15px;
    line-height: 1.6;
    width: 80%;
    font-size: 16px;
    opacity: 0.85;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    color: rgba(255, 255, 255, 0.9);
}

#heroBuyBtn{
    background: #ff2a6d;
    border:none;
    width:80px;
    height:80px;
    border-radius:50%;
    color:white;
    font-size:28px;
    cursor:pointer;
    display:flex;
    justify-content:center;
    align-items:center;
    position:relative;
    overflow:hidden;
    box-shadow: 0 10px 30px rgba(255, 42, 109, 0.4);
    transition: all 0.3s ease;
    z-index: 2;
}

/* Hero Wishlist Button - Centered, Bigger with Old Spacing */
#heroWishlistBtn {
    position: relative;
    width: 70px;
    height: 70px;
    border-radius: 50%;
    border: none;
    cursor: pointer;
    font-weight: bold;
    flex-shrink: 0;
    align-self: flex-start;
    margin-top: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 4;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
    background: rgba(255, 255, 255, 0.15);
    color: white;
    font-size: 28px;
    margin-top: 50px;
    font-family: "Font Awesome 6 Free";
}

#heroWishlistBtn::before {
    content: "\f004";
    font-family: "Font Awesome 6 Free";
    font-weight: 400;
    transition: all 0.3s ease;
}

#heroWishlistBtn:hover {
    background: rgba(255, 42, 109, 0.3);
    transform: scale(1.15);
    box-shadow: 0 6px 20px rgba(255, 42, 109, 0.4);
}

#heroWishlistBtn:hover::before {
    color: #ff2a6d;
    transform: scale(1.1);
}

#heroWishlistBtn.active {
    color: white;
    background: #ff2a6d;
    box-shadow: 0 6px 20px rgba(255, 42, 109, 0.6);
}

#heroWishlistBtn.active::before {
    font-weight: 900;
    color: white;
}

#heroBuyBtn:hover {
    transform: scale(1.1);
    box-shadow: 0 15px 40px rgba(255, 42, 109, 0.6);
}

#heroBuyBtn.success{
    background: linear-gradient(135deg, var(--green), #20c997);
}

#heroBuyBtn .tick{
    position:absolute;
    top:50%;
    left:50%;
    transform: translate(-50%, -50%) scale(0) rotate(-45deg);
    width:24px;
    height:24px;
    border-left:3px solid white;
    border-bottom:3px solid white;
    transform-origin:center;
    animation: tickAnim 0.5s forwards;
}

@keyframes tickAnim {
    0%{transform: translate(-50%, -50%) scale(0) rotate(-45deg);}
    50%{transform: translate(-50%, -50%) scale(1.2) rotate(-45deg);}
    100%{transform: translate(-50%, -50%) scale(1) rotate(-45deg);}
}

/* CATEGORIES */
.categories{
    display:flex;
    justify-content:center;
    gap:12px;
    margin:40px auto 30px;
    flex-wrap:wrap;
    width:100%;
    max-width:100%;
    padding:0 20px;
    box-sizing: border-box;
}

.categories button{
    padding:12px 24px;
    background: radial-gradient(circle at top left, rgba(255, 42, 109, 0.12), rgba(17, 13, 24, 0.95));
    backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 42, 109, 0.3);
    border-radius: 12px;
    color: rgba(255, 255, 255, 0.9);
    cursor:pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 600;
    font-size: 14px;
    position: relative;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.categories button::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, rgba(255, 42, 109, 0.6), transparent);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.categories button:hover::before {
    opacity: 1;
}

.categories button:hover{
    background: radial-gradient(circle at top left, rgba(255, 42, 109, 0.25), rgba(17, 13, 24, 0.95));
    border-color: rgba(255, 42, 109, 0.6);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255, 42, 109, 0.4);
    color: #fff;
}

.categories button:active {
    transform: translateY(0);
}

/* MOVIES & TRENDS CONTAINER */
.container{
    max-width: 1400px;
    margin: auto;
    padding: 60px 3vw;
    position: relative;
    display:flex;
    gap:30px;
    flex-wrap:nowrap;
    box-sizing: border-box;
    overflow-x: hidden;
    align-items: flex-start;
}

.movies-section {
    flex: 1;
    min-width: 0;
}

@media (max-width: 768px) {
    .container {
        flex-wrap: wrap;
    }
}

/* Add breathing room between sections */
section {
    margin-bottom: 80px;
}

section:last-child {
    margin-bottom: 40px;
}

.movies-section{
    flex:3;
    display:flex;
    flex-direction:column;
    gap: 0;
    padding: 20px 0;
    min-width: 0;
}

.trends-section{
    flex: 0 0 320px;
    background:rgba(17, 17, 34, 0.8);
    backdrop-filter: blur(15px);
    padding:20px;
    border-radius:15px;
    min-width:220px;
    border: 1px solid rgba(255, 42, 109, 0.2);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    height: fit-content;
    position: sticky;
    top: 100px;
    display: flex;
    flex-direction: column;
    gap: 20px;
}

@media (max-width: 768px) {
    .trends-section {
        flex: 1 1 100%;
        position: relative;
        top: 0;
    }
}
.filter-bar{
    width:90%;
    max-width: 1400px;
    margin:30px auto;
    display:flex;
    justify-content:flex-end;
    gap:12px;
    align-items:center;
    flex-wrap:wrap;
    padding: 18px 24px;
    background: radial-gradient(circle at top left, rgba(255, 42, 109, 0.12), rgba(17, 13, 24, 0.95));
    backdrop-filter: blur(15px);
    border-radius: 16px;
    border: 1px solid rgba(255, 42, 109, 0.3);
    box-sizing: border-box;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    position: relative;
}

.filter-bar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, rgba(255, 42, 109, 0.4), transparent);
    border-radius: 16px 16px 0 0;
    opacity: 0.6;
}

.filter-bar label{
    font-size:14px;
    color: rgba(255, 255, 255, 0.9);
    font-weight: 600;
    margin-right: 8px;
}

.filter-bar select{
    background: rgba(31, 31, 48, 0.6);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 42, 109, 0.3);
    color: rgba(255, 255, 255, 0.9);
    padding: 10px 18px;
    border-radius: 12px;
    cursor:pointer;
    font-size: 13px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 500;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23ff2a6d' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 40px;
}

.filter-bar select:focus {
    outline: none;
    border-color: rgba(255, 42, 109, 0.6);
    box-shadow: 0 0 0 3px rgba(255, 42, 109, 0.1);
    background-color: rgba(31, 31, 48, 0.8);
}

.filter-bar select:hover {
    border-color: rgba(255, 42, 109, 0.5);
    background-color: rgba(31, 31, 48, 0.7);
}

.filter-bar button{
    background: linear-gradient(135deg, rgba(255, 42, 109, 0.4), rgba(255, 90, 141, 0.4));
    border: 1px solid rgba(255, 42, 109, 0.5);
    box-shadow: 0 4px 15px rgba(255, 42, 109, 0.3);
    color: white;
    padding: 10px 20px;
    border-radius: 12px;
    cursor: pointer;
    font-size: 13px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-weight: 600;
    position: relative;
    overflow: hidden;
}

.filter-bar button::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    transform: translate(-50%, -50%);
    transition: width 0.4s ease, height 0.4s ease;
}

.filter-bar button:hover::before {
    width: 200px;
    height: 200px;
}

.filter-bar button:hover{
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255, 42, 109, 0.5);
    border-color: rgba(255, 42, 109, 0.7);
    background: linear-gradient(135deg, rgba(255, 42, 109, 0.5), rgba(255, 90, 141, 0.5));
}

.filter-bar button:active {
    transform: translateY(0);
}
.movie-category-heading {
    display: flex;
    align-items: center;
    font-size: 1.8rem;
    font-weight: 700;
    margin: 40px 0 20px;
    background: linear-gradient(135deg, #fff, #ff2a6d);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    gap: 15px;
    opacity: 0;
    transform: translateY(30px);
    animation: fadeInUp 0.8s ease forwards;
    position: relative;
    padding: 0 3vw;
}

.movie-category-heading:nth-child(1) { animation-delay: 0.1s; }
.movie-category-heading:nth-child(3) { animation-delay: 0.2s; }
.movie-category-heading:nth-child(5) { animation-delay: 0.3s; }
.movie-category-heading:nth-child(7) { animation-delay: 0.4s; }
.movie-category-heading:nth-child(9) { animation-delay: 0.5s; }
.movie-category-heading:nth-child(11) { animation-delay: 0.6s; }

@keyframes fadeInUp {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.movie-category-heading .line {
    flex-grow: 1;
    height: 2px;
    background: linear-gradient(90deg, rgba(255, 42, 109, 0.6), transparent);
    position: relative;
    overflow: hidden;
}

.movie-category-heading .line::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
    animation: shimmer 3s infinite;
}

@keyframes shimmer {
    0% { left: -100%; }
    100% { left: 100%; }
}

.movie-row{
    display: flex;
    gap: 20px;
    overflow-x: auto;
    overflow-y: hidden;
    scroll-behavior: smooth;
    flex-wrap: nowrap;
    padding: 10px 3vw 25px;
    margin-bottom: 50px;
    -webkit-overflow-scrolling: touch;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
}

.movie-row::-webkit-scrollbar{
    height:10px;
}

.movie-row::-webkit-scrollbar-track{
    background: rgba(255, 255, 255, 0.05);
    border-radius: 5px;
}

.movie-row::-webkit-scrollbar-thumb{
    background:linear-gradient(90deg, var(--pink), #8a2be2);
    border-radius:5px;
    transition: background 0.3s;
}

.movie-row::-webkit-scrollbar-thumb:hover{
    background:linear-gradient(90deg, #ff2a6d, #7a1be2);
}
.movie-card {
    background: rgba(18, 18, 32, 0.95);
    backdrop-filter: blur(15px);
    border-radius: 16px;
    overflow: hidden;
    flex-shrink: 0;
    position: relative;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    width: 160px;
    min-width: 160px;
    max-width: 160px;
    transform-style: preserve-3d;
    border: 1px solid rgba(255, 42, 109, 0.15);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
}

.movie-card:hover {
    transform: translateY(-10px) scale(1.03);
    border-color: rgba(255, 42, 109, 0.5);
    box-shadow: 0 15px 40px rgba(255, 42, 109, 0.4);
}

.movie-card img {
    width: 100%;
    height: 220px;
    object-fit: cover;
    display: block;
    transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    max-width: 100%;
}

.movie-card:hover img {
    transform: scale(1.1);
}

.movie-info {
    padding: 14px 12px;
    text-align: center;
    background: rgba(18, 18, 32, 0.98);
}

.movie-info h4 {
    font-size: 15px;
    margin-bottom: 6px;
    font-weight: 700;
    color: rgba(255, 255, 255, 0.98);
    line-height: 1.3;
}

.movie-info .year {
    font-size: 12px;
    opacity: 0.75;
    color: rgba(255, 255, 255, 0.75);
    font-weight: 500;
}

/* Hover overlay */
.movie-hover {
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:linear-gradient(180deg, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.95) 100%);
    backdrop-filter: blur(5px);
    opacity:0;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    padding:15px;
    text-align:center;
    z-index:3;
    border-radius: 12px;
}

.movie-card:hover .movie-hover {
    opacity:1;
}

.movie-hover h4 {
    font-size:18px;
    margin-bottom:6px;
    font-weight: 700;
    color: white;
}

.movie-hover .year {
    font-size:13px;
    opacity:0.9;
    margin-bottom: 8px;
}

.movie-hover .stars {
    margin:8px 0;
}

.buy-btn {
    padding: 9px 18px;
    background: #ff2a6d;
    color: white;
    border-radius: 999px;
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    box-shadow: 0 6px 18px rgba(255, 42, 109, 0.3);
    position: relative;
    overflow: hidden;
    width: 100%;
    margin-top: 8px;
}

.buy-btn::before {
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    content: "\f145";
    font-size: 14px;
    transition: transform 0.3s ease;
}

.buy-btn::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s ease, height 0.6s ease;
}

.buy-btn:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 10px 30px rgba(255, 42, 109, 0.5);
    background: #ff5a8d;
}

.buy-btn:hover::before {
    transform: scale(1.2) rotate(10deg);
}

.buy-btn:hover::after {
    width: 300px;
    height: 300px;
}

.buy-btn:active {
    transform: translateY(-1px) scale(1.02);
}

.view-shows-btn {
    padding: 9px 18px;
    background: transparent;
    color: white;
    border: 2px solid rgba(255, 42, 109, 0.6);
    border-radius: 999px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    margin-top: 8px;
    width: 100%;
    position: relative;
    overflow: hidden;
}

.view-shows-btn:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 10px 30px rgba(255, 42, 109, 0.4);
    background: rgba(255, 42, 109, 0.2);
    border-color: #ff2a6d;
}

.view-shows-btn:active {
    transform: translateY(-1px) scale(1.02);
}

/* Buttons */
.info-btn, .wishlist-btn {
    position:absolute;
    top:10px;
    width:32px;
    height:32px;
    border-radius:50%;
    border:none;
    cursor:pointer;
    font-weight:bold;
    display:flex;
    align-items:center;
    justify-content:center;
    transition:all 0.3s ease;
    z-index:4;
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
}

.info-btn {
    right:10px;
    background:rgba(255,255,255,0.15);
    color:white;
    font-size:18px;
}

.info-btn:hover {
    background:rgba(255,255,255,0.25);
    transform: scale(1.1);
}

.wishlist-btn {
    right:48px;
    background:rgba(255,255,255,0.15);
    color:white;
    font-size:18px;
    font-family: "Font Awesome 6 Free";
    font-weight: 400;
}

.wishlist-btn::before {
    content: "\f004";
    font-family: "Font Awesome 6 Free";
    font-weight: 400;
}

.wishlist-btn:hover {
    background:rgba(255, 42, 109, 0.3);
    transform: scale(1.1);
}

.wishlist-btn:hover::before {
    font-weight: 900;
    color: #ff2a6d;
}

.wishlist-btn.active {
    color:white;
    background: #ff2a6d;
    box-shadow: 0 4px 15px rgba(255, 42, 109, 0.5);
}

.wishlist-btn.active::before {
    font-weight: 900;
    color: white;
}

/* Hidden overlay */
.hidden-overlay{
    position:absolute;
    top:0; left:0;
    width:100%; height:100%;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    color:white;
    cursor:pointer;
    font-size:14px;
    backface-visibility:hidden;
}

/* Blurred state */
.blurred{
    filter:blur(4px);
    transform:rotateY(180deg);
}

/* TRENDS */
.trends-section h2{
    margin-bottom: 25px;
    font-size: 1.8rem;
    background: linear-gradient(135deg, #fff, #ff2a6d);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: 700;
    text-align: center;
    padding-bottom: 15px;
    border-bottom: 2px solid rgba(255, 42, 109, 0.3);
    position: relative;
}

.trends-section h2::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 2px;
    background: linear-gradient(90deg, transparent, #ff2a6d, transparent);
}

.trend-item{
    display:flex;
    gap:14px;
    margin-bottom:18px;
    cursor:pointer;
    transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    padding:16px;
    border-radius:14px;
    background: linear-gradient(135deg, rgba(255, 42, 109, 0.08) 0%, rgba(138, 43, 226, 0.05) 100%);
    border: 1.5px solid rgba(255, 42, 109, 0.2);
    position: relative;
    flex-direction: column;
    overflow: hidden;
    backdrop-filter: blur(10px);
}

.trend-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 42, 109, 0.1), transparent);
    transition: left 0.5s ease;
}

.trend-item:hover::before {
    left: 100%;
}

.trend-item-content {
    display: flex;
    gap: 14px;
    flex: 1;
    align-items: center;
}

.trend-item .wishlist-icon {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: rgba(255, 42, 109, 0.2);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 42, 109, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s;
    z-index: 3;
    font-size: 16px;
    color: white;
    font-family: "Font Awesome 6 Free";
}

.trend-item .wishlist-icon::before {
    content: "\f004";
    font-family: "Font Awesome 6 Free";
    font-weight: 400;
    transition: all 0.3s ease;
}

.trend-item .wishlist-icon:hover {
    background: rgba(255, 42, 109, 0.3);
    transform: scale(1.1);
    box-shadow: 0 4px 15px rgba(255, 42, 109, 0.5);
}

.trend-item .wishlist-icon:hover::before {
    color: #ff2a6d;
    transform: scale(1.1);
}

.trend-item .wishlist-icon.active {
    background: linear-gradient(135deg, var(--pink), #8a2be2);
    box-shadow: 0 4px 15px rgba(255, 42, 109, 0.5);
    color: white;
}

.trend-item .wishlist-icon.active::before {
    font-weight: 900;
    color: white;
}

@media (max-width: 768px) {
    .trend-item {
        padding: 10px;
    }
    
    .trend-item .wishlist-icon {
        top: 6px;
        right: 6px;
        width: 28px;
        height: 28px;
        font-size: 16px;
    }
}

.trend-item:hover{
    transform:translateX(6px) scale(1.02);
    box-shadow:0 12px 35px rgba(255, 42, 109, 0.4), 0 0 20px rgba(138, 43, 226, 0.2);
    background:linear-gradient(135deg, rgba(255,42,109,0.18) 0%, rgba(138, 43, 226, 0.12) 100%);
    border-color: rgba(255, 42, 109, 0.5);
}

.trend-item img{
    width:80px;
    height:110px;
    border-radius:10px;
    object-fit:cover;
    flex-shrink:0;
    transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border: 2px solid rgba(255, 42, 109, 0.3);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.trend-item:hover img{
    transform:scale(1.08) rotate(2deg);
    filter:brightness(1.15);
    border-color: rgba(255, 42, 109, 0.6);
    box-shadow: 0 6px 20px rgba(255, 42, 109, 0.4);
}

.trend-item h4 {
    font-size: 1.1rem;
    font-weight: 700;
    color: #fff;
    margin-bottom: 6px;
    transition: color 0.3s ease;
}

.trend-item:hover h4 {
    color: #ff2a6d;
}

.trend-item p {
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.7);
    margin: 0;
    font-weight: 500;
}

.trends-extra{
    margin-top: 25px;
    padding: 20px;
    background: linear-gradient(135deg, rgba(255, 42, 109, 0.1) 0%, rgba(138, 43, 226, 0.08) 100%);
    border-radius: 14px;
    border: 1px solid rgba(255, 42, 109, 0.2);
    backdrop-filter: blur(10px);
}

.trends-extra h3 {
    margin: 0 0 12px 0;
    font-size: 1.1rem;
    color: var(--pink);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.trends-extra p {
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 12px;
    line-height: 1.6;
}

.trends-extra ul {
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.75);
    list-style: none;
    padding-left: 0;
    line-height: 1.8;
    margin: 0;
}

.trends-extra ul li {
    padding-left: 20px;
    position: relative;
    margin-bottom: 8px;
}

.trends-extra ul li::before {
    content: 'â–¸';
    position: absolute;
    left: 0;
    color: var(--pink);
    font-weight: bold;
}

/* Newsletter & Author Comments Section (Desktop Only) */
.newsletter-author-wrapper {
    display: none; /* Hidden by default, shown only on desktop */
    flex-direction: column;
    gap: 20px;
    width: 100%;
    max-width: 100%;
}

@media (min-width: 769px) {
    .newsletter-author-wrapper {
        display: flex;
    }
}

.newsletter-card, .author-comments-card {
    background: linear-gradient(135deg, rgba(17, 17, 34, 0.95) 0%, rgba(12, 12, 28, 0.95) 100%);
    backdrop-filter: blur(20px);
    border-radius: 20px;
    padding: 25px;
    border: 1px solid rgba(255, 42, 109, 0.2);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
    position: relative;
    overflow: hidden;
    animation: fadeInUp 0.8s ease-out;
}

.newsletter-card::before, .author-comments-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 42, 109, 0.1), transparent);
    transition: left 0.6s ease;
}

.newsletter-card:hover::before, .author-comments-card:hover::before {
    left: 100%;
}

.newsletter-card:hover, .author-comments-card:hover {
    transform: translateY(-5px);
    border-color: rgba(255, 42, 109, 0.4);
    box-shadow: 0 25px 60px rgba(255, 42, 109, 0.3);
}

.newsletter-icon {
    font-size: 2.5rem;
    margin-bottom: 15px;
    filter: drop-shadow(0 4px 12px rgba(255, 42, 109, 0.5));
    transition: transform 0.3s;
}

.newsletter-card:hover .newsletter-icon {
    transform: scale(1.1) rotate(5deg);
}

.newsletter-title {
    font-size: 1.4rem;
    font-weight: 700;
    background: linear-gradient(135deg, #fff, #ff2a6d);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 1px;
}


.newsletter-form {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 12px;
}

.newsletter-input {
    padding: 12px 16px;
    border-radius: 10px;
    border: 1px solid rgba(255, 42, 109, 0.3);
    background: rgba(26, 21, 37, 0.6);
    color: #fff;
    font-size: 0.9rem;
    transition: all 0.3s ease;
    outline: none;
}

.newsletter-input::placeholder {
    color: rgba(255, 255, 255, 0.5);
}

.newsletter-input:focus {
    border-color: rgba(255, 42, 109, 0.6);
    background: rgba(26, 21, 37, 0.8);
    box-shadow: 0 0 20px rgba(255, 42, 109, 0.2);
}

.newsletter-btn {
    padding: 12px 24px;
    border-radius: 10px;
    border: none;
    background: linear-gradient(135deg, var(--pink), #8a2be2);
    color: #fff;
    font-size: 0.9rem;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.newsletter-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(255, 42, 109, 0.4);
    background: linear-gradient(135deg, #ff4a7d, #9a3bf2);
}

.newsletter-btn:active {
    transform: translateY(0);
}

.newsletter-btn i {
    transition: transform 0.3s ease;
}

.newsletter-btn:hover i {
    transform: translateX(5px);
}

.newsletter-privacy {
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.6);
    text-align: center;
    margin-top: 8px;
}

/* Author Comments Card */
.author-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
}

.author-avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    overflow: hidden;
    border: 3px solid rgba(255, 42, 109, 0.4);
    flex-shrink: 0;
}

.author-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.author-name {
    font-size: 1.1rem;
    font-weight: 700;
    color: #fff;
    margin-bottom: 4px;
    background: linear-gradient(135deg, #fff, #ff2a6d);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.author-role {
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.7);
    text-transform: uppercase;
    letter-spacing: 1px;
}

.author-comment {
    margin-bottom: 15px;
}

.author-comment p {
    color: rgba(255, 255, 255, 0.85);
    font-size: 0.95rem;
    line-height: 1.7;
    font-style: italic;
    position: relative;
    padding-left: 18px;
}

.author-comment p::before {
    content: '"';
    position: absolute;
    left: 0;
    top: -8px;
    font-size: 2.5rem;
    color: rgba(255, 42, 109, 0.3);
    font-family: serif;
}

.author-signature {
    text-align: right;
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid rgba(255, 42, 109, 0.2);
}

.author-signature span {
    color: var(--pink);
    font-weight: 600;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Reviews Section */
.reviews-section, .theatre-reviews-section {
    padding: 80px 3vw;
    background: transparent;
    margin-top: 80px;
    opacity: 0;
    animation: fadeInUp 0.8s ease forwards;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.reviews-container {
    max-width: 1400px;
    margin: 0 auto;
    width: 100%;
    padding: 0 3vw;
    box-sizing: border-box;
}

.section-heading {
    font-size: 1.4rem;
    font-weight: 700;
    text-align: center;
    margin-bottom: 30px;
    text-transform: uppercase;
    letter-spacing: 2px;
    position: relative;
    padding-bottom: 12px;
    background: linear-gradient(135deg, #fff, #ff2a6d);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.section-heading::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 2px;
    background: linear-gradient(90deg, transparent, #ff2a6d, transparent);
}

/* Movie Reviews Grid */
.reviews-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 15px;
    margin-bottom: 30px;
}

@media (max-width: 768px) {
    .reviews-grid {
        display: flex;
        flex-direction: row;
        overflow-x: auto;
        overflow-y: hidden;
        -webkit-overflow-scrolling: touch;
        scroll-snap-type: x mandatory;
        gap: 20px;
        padding: 0 15px;
        scrollbar-width: thin;
    }
    
    .review-card {
        min-width: 280px;
        max-width: 280px;
        flex-shrink: 0;
    }
}

.review-card {
    background: radial-gradient(circle at top left, rgba(255, 42, 109, 0.16), rgba(17, 13, 24, 0.95));
    border-radius: 12px;
    padding: 20px;
    color: #f5f5f5;
    border: 1px solid rgba(255, 42, 109, 0.3);
    transition: all 0.3s ease;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    overflow: hidden;
    word-wrap: break-word;
}

.review-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 24px rgba(255, 42, 109, 0.3);
    border-color: rgba(255, 42, 109, 0.7);
}

.review-header {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 12px;
}

.review-header img {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid rgba(255, 42, 109, 0.4);
    box-shadow: 0 4px 12px rgba(255, 42, 109, 0.2);
}

.review-content {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: center;
    text-align: center;
}

.reviewer-info {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    margin-bottom: 8px;
}

.reviewer-info h4 {
    font-size: 1rem;
    font-weight: 600;
    color: #fff;
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    background: linear-gradient(135deg, #fff, #ff2a6d);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.reviewer-info h4 i {
    color: #ff2a6d;
    font-size: 1rem;
}

.star-rating {
    color: #ff2a6d;
    font-size: 1rem;
    letter-spacing: 3px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
}

.review-text {
    color: rgba(255, 255, 255, 0.75);
    line-height: 1.6;
    font-size: 0.9rem;
    margin: 0;
    font-style: italic;
    font-weight: 400;
    position: relative;
    padding: 0 20px;
    word-wrap: break-word;
    overflow-wrap: break-word;
    max-width: 100%;
}

.review-text::before {
    content: '"';
    position: absolute;
    left: 0;
    top: -8px;
    font-size: 2.5rem;
    color: rgba(255, 42, 109, 0.5);
    font-family: serif;
    line-height: 1;
}

.review-text::after {
    content: '"';
    position: absolute;
    right: 0;
    bottom: -20px;
    font-size: 2.5rem;
    color: rgba(255, 42, 109, 0.5);
    font-family: serif;
    line-height: 1;
}

.review-movie {
    font-size: 0.85rem;
    color: rgba(255, 42, 109, 0.9);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    margin-top: 8px;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.review-movie i {
    color: rgba(255, 42, 109, 0.9);
    font-size: 0.9rem;
}

/* Theatre Reviews Grid */
.theatre-reviews-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 25px;
    margin-bottom: 40px;
}

@media (max-width: 768px) {
    .theatre-reviews-grid {
        display: flex;
        flex-direction: row;
        overflow-x: auto;
        overflow-y: hidden;
        -webkit-overflow-scrolling: touch;
        scroll-snap-type: x mandatory;
        gap: 20px;
        padding: 0 15px;
        scrollbar-width: thin;
    }
    
    .theatre-reviews-grid .review-card {
        min-width: 320px;
        max-width: 320px;
        flex-shrink: 0;
    }
}

.theatre-review-card {
    background: radial-gradient(circle at top left, rgba(255, 42, 109, 0.16), rgba(17, 13, 24, 0.95));
    border-radius: 12px;
    padding: 20px;
    color: #f5f5f5;
    border: 1px solid rgba(255, 42, 109, 0.3);
    transition: all 0.3s ease;
    position: relative;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.theatre-review-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 24px rgba(255, 42, 109, 0.3);
    border-color: rgba(255, 42, 109, 0.7);
}

.theatre-info {
    margin-bottom: 12px;
}

.theatre-info h3 {
    font-size: 1.1rem;
    font-weight: 600;
    color: #fff;
    margin: 0 0 8px 0;
    display: flex;
    align-items: center;
    gap: 8px;
}

.theatre-info h3 i {
    color: #ff2a6d;
    font-size: 1.1rem;
}

.theatre-location {
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.6);
    margin: 0;
    display: flex;
    align-items: center;
    gap: 6px;
}

.theatre-location i {
    color: rgba(255, 42, 109, 0.7);
    font-size: 0.9rem;
}

.theatre-rating {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 12px;
}

.theatre-rating .star-rating {
    color: #ff2a6d;
    font-size: 1rem;
    letter-spacing: 3px;
    display: flex;
    align-items: center;
    font-weight: 600;
}

.rating-text {
    color: #ff2a6d;
    font-weight: 700;
    font-size: 1rem;
    background: linear-gradient(135deg, #ff2a6d, #8a2be2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.theatre-review-text {
    color: rgba(255, 255, 255, 0.75);
    line-height: 1.7;
    font-size: 0.9rem;
    margin-bottom: 12px;
    position: relative;
    padding: 0 20px;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    font-style: italic;
    font-weight: 400;
    text-align: center;
}

.theatre-review-text::before {
    content: '"';
    position: absolute;
    left: 0;
    top: -8px;
    font-size: 2.5rem;
    color: rgba(255, 42, 109, 0.5);
    font-family: serif;
    line-height: 1;
}

.theatre-review-text::after {
    content: '"';
    position: absolute;
    right: 0;
    bottom: -20px;
    font-size: 2.5rem;
    color: rgba(255, 42, 109, 0.5);
    font-family: serif;
    line-height: 1;
}

.reviewer-name {
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.6);
    font-style: normal;
    font-weight: 400;
    display: flex;
    align-items: center;
    gap: 6px;
}

.reviewer-name i {
    color: rgba(255, 42, 109, 0.7);
    font-size: 0.85rem;
}

/* FOOTER */
.footer {
    position: relative;
    padding: 90px 40px 50px;
    background: linear-gradient(180deg, #000000 0%, #0a0a0f 30%, #0b0b0f 60%, #000000 100%);
    color: white;
    overflow: hidden;
    border-top: 2px solid rgba(255, 42, 109, 0.3);
    margin-top: 100px;
}

.footer::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, #ff2a6d 20%, #8a2be2 50%, #ff2a6d 80%, transparent);
    box-shadow: 0 0 20px rgba(255, 42, 109, 0.5);
}

.footer::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 20% 50%, rgba(255, 42, 109, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(138, 43, 226, 0.03) 0%, transparent 50%);
    pointer-events: none;
    z-index: 1;
}

.jelly {
    position: absolute;
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: #ff2a6d;
    box-shadow: 0 0 20px #ff2a6d;
    z-index: 3;
    transition: transform 0.1s ease;
}

.trail {
    position: absolute;
    width: 25px;
    height: 25px;
    background: #ff2a6d;
    border-radius: 50%;
    opacity: 0.25;
    transform: translate(-50%, -50%);
    filter: blur(6px);
    pointer-events: none;
    z-index: 1;
    transition: opacity 0.5s ease-out;
}

@media (max-width: 700px) {
    .jelly {
        width: 55px;
        height: 55px;
        bottom: 20px !important;
        left: 20px !important;
        animation: none !important;
        transform: none !important;
    }
    #bubble2 {
        right: 20px !important;
        left: auto !important;
    }
}

.footer-content {
    position: relative;
    z-index: 5;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 50px;
    max-width: 1200px;
    margin: 0 auto;
}

.footer-section h3 {
    color: #ff2a6d;
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 15px;
    background: linear-gradient(135deg, #ff2a6d, #8a2be2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.footer-section h4 {
    color: #ff2a6d;
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 20px;
    position: relative;
    padding-bottom: 10px;
}

.footer-section h4::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 40px;
    height: 2px;
    background: linear-gradient(90deg, #ff2a6d, transparent);
}

.footer-section p {
    color: rgba(255, 255, 255, 0.7);
    line-height: 1.6;
    margin-top: 10px;
}

.footer-section ul {
    list-style: none;
    padding: 0;
}

.footer-section ul li {
    margin: 10px 0;
}

.footer-section ul li a {
    color: rgba(255, 255, 255, 0.8);
    text-decoration: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    display: inline-flex;
    align-items: center;
    position: relative;
    padding-left: 0;
}

.footer-section ul li a::before {
    content: 'â†’';
    position: absolute;
    left: -20px;
    opacity: 0;
    color: #ff2a6d;
    transition: all 0.3s ease;
    transform: translateX(-5px);
}

.footer-section ul li a::after {
    content: '';
    position: absolute;
    bottom: -3px;
    left: 0;
    width: 0;
    height: 2px;
    background: linear-gradient(90deg, #ff2a6d, #8a2be2);
    transition: width 0.3s ease;
}

.footer-section ul li a:hover {
    color: #ff2a6d;
    transform: translateX(8px);
    padding-left: 20px;
}

.footer-section ul li a:hover::before {
    opacity: 1;
    transform: translateX(0);
}

.footer-section ul li a:hover::after {
    width: 100%;
}

/* Social Media Icons */
.footer-section .social-icons {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-top: 10px;
}

.footer-section .social-icons li {
    margin: 0;
    position: relative;
}

.footer-section .social-icons li a {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 42, 109, 0.3);
    font-size: 1.8rem;
    padding: 0;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: visible;
}

.footer-section .social-icons li a::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 42, 109, 0.2);
    transform: translate(-50%, -50%);
    transition: width 0.6s ease, height 0.6s ease;
    z-index: 1;
    pointer-events: none;
}

.footer-section .social-icons li a::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: -52px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.98);
    color: white;
    padding: 10px 18px;
    border-radius: 10px;
    font-size: 0.85rem;
    font-weight: 600;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease, transform 0.2s ease;
    z-index: 1000;
    border: 1px solid rgba(255, 42, 109, 0.5);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(10px);
    min-width: max-content;
    letter-spacing: 0.3px;
    text-align: center;
}

.footer-section .social-icons li a:hover {
    background: rgba(255, 42, 109, 0.15);
    border-color: #ff2a6d;
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 8px 20px rgba(255, 42, 109, 0.4);
    padding-left: 0;
}

.footer-section .social-icons li a:hover::after {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

.footer-section .social-icons li a:hover::before {
    width: 90px;
    height: 90px;
}


.footer-section .social-icons li:nth-child(3) a:hover {
    border-color: #1877F2;
    box-shadow: 0 8px 20px rgba(24, 119, 242, 0.4);
}

.footer-bottom {
    position: relative;
    z-index: 5;
    text-align: center;
    margin-top: 50px;
    padding-top: 30px;
    border-top: 1px solid rgba(255, 42, 109, 0.2);
    color: rgba(255, 255, 255, 0.6);
    font-size: 0.9rem;
}

/* SEARCH PREVIEW CARD */
.search-preview{
    position:fixed;
    right:24px;
    top:90px;
    width:260px;
    background:rgba(9,9,19,0.98);
    border-radius:12px;
    padding:10px;
    box-shadow:0 14px 30px rgba(0,0,0,0.8);
    border:1px solid rgba(255,255,255,0.06);
    display:none;
    z-index:50;
    animation:previewIn 0.25s ease-out forwards;
}
.search-preview-inner{
    display:flex;
    gap:10px;
}
.search-preview img{
    width:80px;
    height:110px;
    border-radius:8px;
    object-fit:cover;
    flex-shrink:0;
}
.search-preview-info h4{
    font-size:14px;
    margin-bottom:3px;
}
.search-preview-info .year{
    font-size:12px;
    opacity:0.8;
}
.search-preview-actions{
    margin-top:6px;
    display:flex;
    gap:6px;
}
.search-preview-actions button{
    flex:1;
    border:none;
    border-radius:999px;
    padding:5px 6px;
    font-size:11px;
    cursor:pointer;
    background:#1f1f30;
    color:#fff;
}
.search-preview-actions button.primary{
    background:var(--pink);
}
@keyframes previewIn{
    from{opacity:0;transform:translateY(-8px);}
    to{opacity:1;transform:translateY(0);}
}

/* TOAST */
.toast{
    position:fixed;
    left:50%;
    bottom:30px;
    transform:translateX(-50%);
    padding:14px 24px;
    border-radius:12px;
    background:rgba(0,0,0,0.95);
    backdrop-filter: blur(10px);
    color:#fff;
    font-size:14px;
    font-weight:500;
    display:none;
    align-items:center;
    justify-content:center;
    gap:10px;
    z-index:12000;
    box-shadow:0 10px 30px rgba(0,0,0,0.8);
    border:1px solid rgba(255, 42, 109, 0.3);
    min-width:250px;
    max-width:90%;
    text-align:center;
    animation:toastIn 0.3s ease-out;
}

.toast.show{
    display:flex;
}

.toast.error {
    background:rgba(220, 38, 38, 0.95);
    border-color:rgba(255, 68, 68, 0.5);
    box-shadow:0 10px 30px rgba(220, 38, 38, 0.5);
}

.toast.success {
    background:rgba(34, 197, 94, 0.95);
    border-color:rgba(74, 222, 128, 0.5);
    box-shadow:0 10px 30px rgba(34, 197, 94, 0.5);
}

@keyframes toastIn{
    from{
        opacity:0;
        transform:translate(-50%, 20px) scale(0.9);
    }
    to{
        opacity:1;
        transform:translate(-50%, 0) scale(1);
    }
}

@keyframes purchasePulse{
    0%{transform:scale(0.7);opacity:0;}
    40%{transform:scale(1.05);opacity:1;}
    100%{transform:scale(1);opacity:0;}
}

/* TICKET MODAL */
.modal{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.95);
    backdrop-filter: blur(10px);
    display:none;
    align-items:center;
    justify-content:center;
    z-index: 10000;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.modal.show {
    display: flex;
}
.modal-content{
    background:rgba(17, 17, 34, 0.98);
    backdrop-filter: blur(20px);
    padding:25px;
    border-radius:20px;
    width:100%;
    max-width:450px;
    position:relative;
    transform:scale(0.8);
    transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow:0 20px 60px rgba(0,0,0,0.9);
    border:1px solid rgba(255, 42, 109, 0.3);
    animation: modalSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: scale(0.8) translateY(-30px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

.modal.show .modal-content{
    transform:scale(1);
}

.modal-header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    margin-bottom:10px;
}
.modal-header-left{
    display:flex;
    flex-direction:column;
    gap:3px;
}
.modal-title{
    font-size:18px;
    font-weight:700;
}
.modal-rating{
    font-size:13px;
    opacity:0.85;
}
.modal-tag{
    display:inline-block;
    padding:4px 10px;
    border-radius:999px;
    font-size:11px;
    background:rgba(255,42,109,0.14);
    border:1px solid rgba(255,42,109,0.5);
}
.modal img{
    width:100%;
    height:210px;
    object-fit:cover;
    border-radius:10px;
    margin-bottom:12px;
}
.selection-step{
    margin:10px 0;
}
.selection-step p{
    font-size:13px;
    opacity:0.9;
    margin-bottom:4px;
}
.selection-step button{
    margin:5px;
    padding:8px 14px;
    border:1px solid rgba(255, 42, 109, 0.3);
    border-radius:999px;
    background:rgba(31, 31, 48, 0.8);
    color:white;
    cursor:pointer;
    transition:all 0.3s ease;
    font-size:13px;
    font-weight: 500;
}

.selection-step button:hover {
    border-color: rgba(255, 42, 109, 0.5);
    background: rgba(255, 42, 109, 0.1);
}

.selection-step button.active{
    background:linear-gradient(135deg, var(--pink), #8a2be2);
    border-color: var(--pink);
    box-shadow: 0 4px 10px rgba(255, 42, 109, 0.3);
}
.seats{
    display:flex;
    gap:10px;
    margin:10px 0 14px;
    justify-content:center;
    flex-wrap:wrap;
}
.seat-btn{
    padding:10px;
    border-radius:50%;
    border:2px solid rgba(255, 42, 109, 0.4);
    background:rgba(255, 42, 109, 0.1);
    color:white;
    cursor:pointer;
    transition:all 0.3s ease;
    min-width:40px;
    height: 40px;
    text-align:center;
    font-size:13px;
    font-weight: 600;
    display: flex;
    align-items: center;
    justify-content: center;
}

.seat-btn:hover {
    border-color: rgba(255, 42, 109, 0.6);
    background: rgba(255, 42, 109, 0.2);
    transform: scale(1.1);
}

.seat-btn.active{
    background:linear-gradient(135deg, var(--pink), #8a2be2);
    border-color: var(--pink);
    box-shadow: 0 4px 10px rgba(255, 42, 109, 0.4);
    transform: scale(1.1);
}
.purchase-btn{
    background:linear-gradient(135deg, var(--pink), #8a2be2);
    border:none;
    padding:12px;
    width:100%;
    border-radius:999px;
    color:white;
    cursor:pointer;
    font-size:15px;
    font-weight: 600;
    transition:all 0.3s ease;
    box-shadow: 0 4px 15px rgba(255, 42, 109, 0.3);
    margin-top: 10px;
}

.purchase-btn:hover{
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255, 42, 109, 0.5);
}

.purchase-btn:active {
    transform: translateY(0);
}
.close-modal{
    cursor:pointer;
    font-size:24px;
    color:white;
    font-weight:bold;
    padding:6px 10px;
    border-radius:50%;
    background:rgba(255, 42, 109, 0.2);
    border: 1px solid rgba(255, 42, 109, 0.3);
    transition:all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
}

.close-modal:hover {
    background: rgba(255, 42, 109, 0.4);
    border-color: rgba(255, 42, 109, 0.6);
    transform: rotate(90deg) scale(1.1);
}

/* CHECKOUT MODAL - Matching cartModal styling with animated card */
.checkout-modal {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.75);
    backdrop-filter: blur(8px);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 11000;
    opacity: 0;
    transition: opacity 0.3s ease;
    overflow-y: auto;
    padding: 20px;
}

.checkout-modal.show {
    display: flex;
    opacity: 1;
}

.checkout-dialog {
    background: radial-gradient(circle at top left, #25122d 0%, #0d0b14 55%, #07060a 100%);
    border-radius: 20px;
    width: 90%;
    max-width: 800px;
    max-height: 95vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 42, 109, 0.3);
    border: 1px solid rgba(255, 42, 109, 0.4);
    transform: scale(0.9) translateY(20px);
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    overflow: hidden;
    padding: 0;
    position: relative;
}

.checkout-modal.show .checkout-dialog {
    transform: scale(1) translateY(0);
}

/* Animated Credit Card Styles */
.card-wrapper {
    max-width: 430px;
    height: 270px;
    margin: -130px auto 0;
    position: relative;
    z-index: 2;
    width: 100%;
    perspective: 1000px;
}

@media screen and (max-width: 480px) {
    .card-wrapper {
        max-width: 310px;
        height: 220px;
        margin: -120px auto 0;
    }
}

.card-item {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.8s cubic-bezier(0.71, 0.03, 0.56, 0.85);
}

.card-item.flipped {
    transform: rotateY(180deg);
}

.card-side {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 20px 60px 0 rgba(14, 42, 90, 0.55);
}

.card-side.front {
    transform: rotateY(0deg);
}

.card-side.back {
    transform: rotateY(180deg);
}

.card-cover {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #1c1d27 0%, #2a1b3d 50%, #1c1d27 100%);
    border-radius: 15px;
}

.card-cover::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(255, 42, 109, 0.1) 0%, rgba(138, 43, 226, 0.1) 50%, rgba(255, 42, 109, 0.1) 100%);
}

.card-focus {
    position: absolute;
    z-index: 3;
    border-radius: 5px;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    transition: all 0.35s cubic-bezier(0.71, 0.03, 0.56, 0.85);
    opacity: 0;
    pointer-events: none;
    border: 2px solid rgba(255, 42, 109, 0.65);
}

.card-focus.active {
    opacity: 1;
}

.card-content {
    position: relative;
    z-index: 4;
    height: 100%;
    padding: 25px 15px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    color: #fff;
    font-family: 'Source Code Pro', monospace;
    text-shadow: 7px 6px 10px rgba(14, 42, 90, 0.8);
}

.card-top {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    margin-bottom: 40px;
}

.card-chip {
    width: 60px;
    height: 45px;
    background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
    border-radius: 8px;
    position: relative;
    overflow: hidden;
}

.card-chip::before {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    height: 80%;
    border: 2px solid rgba(0, 0, 0, 0.2);
    border-radius: 4px;
}

.card-type {
    height: 45px;
    display: flex;
    justify-content: flex-end;
    align-items: center;
}

.card-type-img {
    height: 100%;
    object-fit: contain;
}

.card-number {
    font-size: 27px;
    font-weight: 500;
    margin-bottom: 35px;
    letter-spacing: 2px;
    font-family: 'Source Code Pro', monospace;
    min-height: 40px;
    display: flex;
    align-items: center;
}

.card-number-item {
    display: inline-block;
    width: 16px;
    text-align: center;
}

.card-number-item.active {
    width: 30px;
}

.card-info {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
}

.card-holder {
    flex: 1;
}

.card-holder-label {
    font-size: 13px;
    opacity: 0.7;
    margin-bottom: 6px;
    display: block;
}

.card-holder-name {
    font-size: 18px;
    text-transform: uppercase;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 200px;
}

.card-date {
    font-size: 18px;
    text-align: right;
}

.card-date-label {
    font-size: 13px;
    opacity: 0.7;
    margin-bottom: 6px;
    display: block;
}

.card-date-value {
    font-size: 18px;
}

/* Card Back */
.card-back {
    position: relative;
}

.card-band {
    background: rgba(0, 0, 19, 0.8);
    width: 100%;
    height: 50px;
    margin-top: 30px;
    position: relative;
    z-index: 2;
}

.card-cvv {
    padding: 15px;
    text-align: right;
    position: relative;
    z-index: 2;
}

.card-cvv-label {
    font-size: 15px;
    font-weight: 500;
    color: #fff;
    margin-bottom: 5px;
    padding-right: 10px;
}

.card-cvv-band {
    height: 45px;
    background: #fff;
    margin-bottom: 30px;
    text-align: right;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding-right: 10px;
    color: #1a3b5d;
    font-size: 18px;
    border-radius: 4px;
    box-shadow: 0px 10px 20px -7px rgba(32, 56, 117, 0.35);
    font-family: 'Source Code Pro', monospace;
    letter-spacing: 3px;
}

.checkout-header {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 24px 28px;
    border-bottom: 1px solid rgba(255, 42, 109, 0.2);
    background: linear-gradient(135deg, rgba(255, 42, 109, 0.1), rgba(138, 43, 226, 0.1));
}

.checkout-header h3 {
    font-size: 1.75rem;
    font-weight: 700;
    background: linear-gradient(135deg, #fff, #ff2a6d);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 0;
    letter-spacing: 0.03em;
}

.checkout-body {
    flex: 1;
    overflow-y: auto;
    padding: 20px 28px;
    padding-top: 180px;
    scrollbar-width: thin;
    scrollbar-color: #ff2a6d #1a1525;
}

.checkout-body::-webkit-scrollbar {
    width: 8px;
}

.checkout-body::-webkit-scrollbar-track {
    background: #1a1525;
    border-radius: 10px;
}

.checkout-body::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #ff2a6d, #8a2be2);
    border-radius: 10px;
}

.checkout-body::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #ff5a8d, #a855f7);
}

@media screen and (max-width: 480px) {
    .checkout-body {
        padding-top: 165px;
    }
}

.checkout-dialog p {
    font-size: 0.9rem;
    color: rgba(255, 255, 255, 0.7);
    margin-bottom: 18px;
    line-height: 1.5;
}

.checkout-row {
    display: flex;
    gap: 10px;
}

.checkout-label {
    font-size: 0.85rem;
    margin-bottom: 6px;
    color: rgba(255, 255, 255, 0.9);
    font-weight: 500;
}

.checkout-input {
    width: 100%;
    padding: 11px 12px;
    border-radius: 10px;
    border: 1px solid rgba(255, 42, 109, 0.3);
    background: rgba(22, 19, 34, 0.8);
    color: #fff;
    font-size: 0.9rem;
    outline: none;
    transition: all 0.3s ease;
    font-family: 'Source Sans Pro', sans-serif;
}

.checkout-input:hover {
    border-color: rgba(255, 42, 109, 0.5);
}

.checkout-input:focus {
    border-color: #ff2a6d;
    box-shadow: 0 0 15px rgba(255, 42, 109, 0.3);
    background: rgba(22, 19, 34, 0.95);
}

.checkout-input::placeholder {
    color: rgba(255, 255, 255, 0.4);
}

.checkout-footer {
    padding: 24px 28px;
    border-top: 1px solid rgba(255, 42, 109, 0.2);
    background: linear-gradient(135deg, rgba(255, 42, 109, 0.08), rgba(138, 43, 226, 0.08));
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.checkout-actions {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
}

.checkout-cancel {
    padding: 10px 18px;
    background: transparent;
    border-radius: 25px;
    border: 1px solid rgba(255, 42, 109, 0.4);
    color: rgba(255, 255, 255, 0.9);
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 500;
}

.checkout-cancel:hover {
    background: rgba(255, 42, 109, 0.1);
    border-color: rgba(255, 42, 109, 0.6);
}

.checkout-pay {
    padding: 10px 22px;
    background: linear-gradient(135deg, #ff2a6d, #8a2be2);
    border-radius: 25px;
    border: none;
    color: #fff;
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(255, 42, 109, 0.3);
}

.checkout-pay:hover {
    background: linear-gradient(135deg, #e0205f, #7a1be2);
    box-shadow: 0 6px 20px rgba(255, 42, 109, 0.5);
    transform: translateY(-2px);
}

.checkout-pay:active {
    transform: translateY(0);
}

#checkoutModalClose:hover {
    transform: rotate(90deg) scale(1.1);
    color: #ff5a8d;
}

/* Responsive */
@media (max-width: 1024px){
    .container{
        flex-direction:column;
    }
    .movies-section,
    .trends-section{
        flex:unset;
        width:100%;
    }
    .trends-section{
        margin-top:20px;
    }
    .trends-extra{
        display:block;
    }
    
    .reviews-grid, .theatre-reviews-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
}

@media (max-width: 768px){
    body {
        overflow-x: hidden !important;
        width: 100% !important;
        max-width: 100vw !important;
    }
    
    * {
        box-sizing: border-box;
    }
    
    nav{
        padding:12px 15px;
        top: 15px;
        left: 15px;
        right: 15px;
        max-width: calc(100vw - 30px);
        box-sizing: border-box;
        position: relative;
        margin-bottom: 10px;
    }
    
    nav .logo {
        font-size: 24px;
        max-width: calc(100% - 100px);
    }
    
    nav .logo img {
        width: 30px;
        margin-right: 8px;
    }
    
    .hero{
        height:350px;
        border-radius: 15px;
        width: calc(100% - 30px);
        max-width: calc(100vw - 30px);
        margin: 10px auto 0;
        box-sizing: border-box;
    }
    
    .hero .overlay {
        bottom: 30px;
        left: 20px;
        right: 20px;
        gap: 12px;
        padding: 0;
        width: auto;
        max-width: 100%;
        box-sizing: border-box;
    }
    
    .hero .overlay h3 {
        font-size: 1.8rem;
    }
    
    .hero-tagline {
        font-size: 0.9rem;
    }
    
    .hero-tag-pill {
        padding: 6px 14px;
        font-size: 0.75rem;
    }
    
    #heroWishlistBtn {
        width: 60px;
        height: 60px;
        font-size: 28px;
        align-self: flex-start;
    }
    
    #heroWishlistBtn:hover {
        transform: scale(1.1);
    }
    
    .hero .overlay {
        flex-direction: column;
        align-items: flex-start;
        gap: 20px;
    }
    
    .hero .overlay .title {
        font-size: 2.5rem;
    }
    
    .hero .overlay .meta {
        font-size: 16px;
    }
    
    .hero .overlay .stars {
        font-size: 18px;
    }
    
    .hero .overlay .desc {
        font-size: 14px;
        width: 100%;
    }
    
    .reviews-section, .theatre-reviews-section {
        padding: 40px 15px;
    }
    
    .section-heading {
        font-size: 1.5rem;
        margin-bottom: 30px;
    }
    
    .reviews-grid, .theatre-reviews-grid {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    
    .review-card, .theatre-review-card {
        padding: 20px;
    }
    
    .hero-tagline {
        font-size: 14px;
        word-wrap: break-word;
    }
    
    .hero-tags {
        gap: 6px;
        font-size: 11px;
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .hero-tag-pill {
        padding: 5px 10px;
        font-size: 10px;
    }
    
    #heroBuyBtn {
        width: 70px;
        height: 70px;
        font-size: 20px;
    }
    
    .categories{
        margin-top:3vh;
        gap:10px;
        padding: 0 15px;
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
    }
    
    .categories button {
        padding: 8px 14px;
        font-size: 12px;
        white-space: nowrap;
    }
    
    .movie-row{
        gap:15px;
        flex-wrap:nowrap;
        overflow-x:auto;
        overflow-y:hidden;
        -webkit-overflow-scrolling: touch;
        scroll-snap-type: x mandatory;
        padding: 0 15px;
        box-sizing: border-box;
        scrollbar-width: thin;
    }
    
    .movie-card{
        width:85%;
        min-width: 85%;
        max-width: 85%;
        flex-shrink: 0;
        scroll-snap-align: start;
        box-sizing: border-box;
    }
    
    .movie-card img{
        height:160px;
        width: 100%;
    }
    
    .search-preview{
        right:12px;
        left:12px;
        width:auto;
        max-width: calc(100vw - 24px);
        top:80px;
        box-sizing: border-box;
    }
    
    .container {
        width: 100%;
        max-width: 100%;
        padding: 0 15px;
        margin: 20px auto 0;
        box-sizing: border-box;
    }
    
    .filter-bar {
        width: calc(100% - 30px);
        max-width: calc(100vw - 30px);
        margin: 20px auto 0;
        padding: 12px 15px;
        box-sizing: border-box;
    }
}

/* Responsive Footer */
@media (max-width: 768px) {
    .footer {
        padding: 60px 20px 40px;
    }
    
    .footer-content {
        grid-template-columns: repeat(2, 1fr);
        gap: 30px;
    }
    
    .footer-section h3 {
        font-size: 1.5rem;
    }
}

@media (max-width: 900px) {
    body {
        overflow-x: hidden;
        width: 100%;
        max-width: 100vw;
    }
    
    .container {
        width: 95%;
        max-width: 100%;
        gap: 20px;
        flex-direction: column;
        padding: 0 15px;
        box-sizing: border-box;
    }
    
    .movies-section {
        width: 100%;
        max-width: 100%;
    }
    
    .trends-section {
        width: 100%;
        max-width: 100%;
        position: relative;
        top: 0;
    }
    
    
    .categories {
        margin-top: 3vh;
        gap: 10px;
        padding: 0 15px;
        width: 100%;
        max-width: 100%;
    }
    
    .categories button {
        padding: 6px 14px;
        font-size: 13px;
        white-space: nowrap;
    }
    
    .hero {
        height: 300px;
        width: calc(100% - 30px);
        max-width: calc(100vw - 30px);
        margin: 20px auto 0;
    }
    
    .movie-row {
        gap: 15px;
        flex-wrap: nowrap;
        overflow-x: auto;
        overflow-y: hidden;
        -webkit-overflow-scrolling: touch;
        scroll-snap-type: x mandatory;
        padding: 0 15px;
        scrollbar-width: thin;
    }
    
    .movie-card {
        width: 85%;
        min-width: 85%;
        max-width: 85%;
        flex-shrink: 0;
        scroll-snap-align: start;
    }
    
    .filter-bar {
        width: 95%;
        max-width: 100%;
        margin: 20px auto 0;
    }
}

@media (max-width: 768px) {
    body {
        overflow-x: hidden;
        width: 100%;
        max-width: 100vw;
    }
    
    .container {
        width: 95%;
        max-width: 100%;
        gap: 20px;
        flex-direction: column;
        padding: 0 10px;
        box-sizing: border-box;
    }
    
    .movies-section {
        width: 100%;
        max-width: 100%;
    }
    
    .trends-section {
        width: 100%;
        max-width: 100%;
        position: relative;
        top: 0;
    }
    
    .hero {
        height: 250px;
        width: calc(100% - 30px);
        max-width: calc(100vw - 30px);
        margin: 20px auto 0;
    }
    
    .hero .overlay {
        padding: 0 15px;
        width: 100%;
        max-width: 100%;
    }
    
    .movie-row {
        gap: 15px;
        flex-wrap: nowrap;
        overflow-x: auto;
        overflow-y: hidden;
        -webkit-overflow-scrolling: touch;
        scroll-snap-type: x mandatory;
        padding: 0 15px;
        scrollbar-width: thin;
    }
    
    .movie-card {
        width: 85%;
        min-width: 85%;
        max-width: 85%;
        flex-shrink: 0;
        scroll-snap-align: start;
    }
    
    .movie-card img {
        height: 150px;
    }
    
    .filter-bar {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
        width: 95%;
        max-width: 100%;
        margin: 20px auto 0;
        padding: 12px 15px;
    }
    
    .filter-bar label,
    .filter-bar select,
    .filter-bar button {
        width: 100%;
        box-sizing: border-box;
    }
    
    .movie-category-heading {
        font-size: 18px;
        padding: 0 5px;
    }
    
    .movie-row {
        gap: 15px;
        flex-wrap: nowrap;
        overflow-x: auto;
        overflow-y: hidden;
        -webkit-overflow-scrolling: touch;
        scroll-snap-type: x mandatory;
        padding: 0 15px;
        scrollbar-width: thin;
    }
    
    .movie-card {
        width: 85%;
        min-width: 85%;
        max-width: 85%;
        flex-shrink: 0;
        scroll-snap-align: start;
    }
    
    .categories {
        padding: 0 10px;
        width: 100%;
        max-width: 100%;
    }
}

/* Review Forms Responsive */
@media (max-width: 768px) {
    .review-forms-grid {
        grid-template-columns: 1fr !important;
        gap: 20px !important;
    }
    
    .review-form-card {
        min-height: auto !important;
    }
}

@media (max-width: 480px) {
    .review-forms-grid {
        gap: 15px !important;
        padding: 0 10px;
    }
    
    .review-form-card {
        padding: 15px !important;
    }
    
    #addReviewsContainer {
        margin-bottom: 30px !important;
    }
}

@media (max-width: 600px) {
    /* Ensure horizontal scroll for reviews */
    .reviews-grid, .theatre-reviews-grid {
        display: flex;
        flex-direction: row;
        overflow-x: auto;
        overflow-y: hidden;
        -webkit-overflow-scrolling: touch;
        scroll-snap-type: x mandatory;
        gap: 15px;
        padding: 0 15px;
    }
    
    .review-card, .theatre-review-card {
        min-width: 90%;
        max-width: 90%;
        flex-shrink: 0;
        scroll-snap-align: start;
        padding: 18px;
    }
    
    .section-heading {
        font-size: 1.3rem;
    }
}

@media (max-width: 480px) {
    body {
        overflow-x: hidden !important;
        width: 100% !important;
        max-width: 100vw !important;
    }
    
    * {
        box-sizing: border-box;
    }
    
    .footer-content {
        grid-template-columns: 1fr;
        gap: 25px;
        padding: 0 15px;
    }
    
    nav {
        padding: 10px 12px;
        top: 10px;
        left: 10px;
        right: 10px;
        max-width: calc(100vw - 20px);
        box-sizing: border-box;
        position: relative;
        margin-bottom: 10px;
    }
    
    nav .logo {
        font-size: 20px;
        max-width: calc(100% - 90px);
    }
    
    nav .logo img {
        width: 24px;
        margin-right: 6px;
    }
    
    nav .icons {
        gap: 8px;
        font-size: 18px;
    }
    
    .hero{
        height:350px;
        border-radius: 16px;
        width: calc(100% - 20px);
        max-width: calc(100vw - 20px);
        margin: 10px auto 0;
        box-sizing: border-box;
    }
    
    .hero .overlay {
        bottom: 30px;
        left: 20px;
        right: 20px;
        gap: 12px;
    }
    
    .hero .overlay h3 {
        font-size: 2rem;
    }
    
    .hero-tagline {
        font-size: 0.95rem;
    }
    
    .hero-tag-pill {
        padding: 6px 14px;
        font-size: 0.8rem;
    }
    
    .hero .overlay {
        bottom: 15px;
        gap: 10px;
        padding: 0 12px;
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
    }
    
    .hero-tagline {
        font-size: 12px;
        word-wrap: break-word;
        line-height: 1.4;
    }
    
    .hero-tags {
        gap: 5px;
        font-size: 9px;
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .hero-tag-pill {
        padding: 4px 8px;
        font-size: 9px;
    }
    
    #heroBuyBtn {
        width: 60px;
        height: 60px;
        font-size: 18px;
    }
    
    .movie-card{
        width: 45%;
        min-width: 100px;
        max-width: 140px;
        box-sizing: border-box;
    }
    
    .movie-card img {
        height: 140px;
        width: 100%;
    }
    
    .container {
        flex-direction: column;
        width: 100%;
        max-width: 100%;
        margin-top: 3vh;
        padding: 0 10px;
        gap: 20px;
        box-sizing: border-box;
    }
    
    .movies-section {
        width: 100%;
        max-width: 100%;
        padding: 0;
    }
    
    .trends-section {
        width: 100%;
        max-width: 100%;
        padding: 12px;
        position: relative;
        top: 0;
        box-sizing: border-box;
    }
    
    .categories {
        gap: 6px;
        margin-top: 2vh;
        padding: 0 10px;
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
    }
    
    .categories button {
        padding: 5px 10px;
        font-size: 10px;
        white-space: nowrap;
    }
    
    .filter-bar {
        flex-direction: column;
        align-items: stretch;
        gap: 8px;
        padding: 10px;
        width: calc(100% - 20px);
        max-width: calc(100vw - 20px);
        margin: 20px auto 0;
        box-sizing: border-box;
    }
    
    .filter-bar label,
    .filter-bar select,
    .filter-bar button {
        width: 100%;
        font-size: 12px;
        padding: 6px 10px;
        box-sizing: border-box;
    }
    
    .movie-category-heading {
        font-size: 16px;
        margin: 15px 0 10px;
        padding: 0 5px;
        word-wrap: break-word;
    }
    
    .movie-row {
        gap: 8px;
        padding-bottom: 8px;
        padding-left: 5px;
        padding-right: 5px;
        box-sizing: border-box;
    }
    
    .trend-item {
        padding: 8px;
        box-sizing: border-box;
    }
    
    .trend-item img {
        width: 50px;
        height: 70px;
    }
    
    .search-preview {
        right: 10px;
        left: 10px;
        width: auto;
        max-width: calc(100vw - 20px);
        top: 70px;
        box-sizing: border-box;
    }
}

@media (min-width: 600px) and (max-width: 768px){
    body {
        overflow-x: hidden;
        width: 100%;
        max-width: 100vw;
    }
    
    .movie-card{
        width: clamp(100px, 30%, 140px);
        min-width: 100px;
    }
    
    .container {
        flex-direction: column;
        width: 95%;
        max-width: 100%;
        padding: 0 15px;
        box-sizing: border-box;
    }
    
    .hero {
        width: calc(100% - 30px);
        max-width: calc(100vw - 30px);
    }
    
    .filter-bar {
        width: 95%;
        max-width: 100%;
    }
    
    .categories {
        padding: 0 15px;
        width: 100%;
        max-width: 100%;
    }
    
    .movies-section {
        width: 100%;
    }
    
    .trends-section {
        width: 100%;
    }
}
/* Time Slot Buttons */
.time-slot {
  padding: 12px;
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid rgba(255, 42, 109, 0.3);
  border-radius: 8px;
  color: white;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 600;
}

.time-slot:hover {
  background: rgba(255, 42, 109, 0.2);
  border-color: var(--pink);
  transform: translateY(-2px);
}

.time-slot.selected {
  background: var(--pink);
  border-color: var(--pink);
  box-shadow: 0 4px 15px rgba(255, 42, 109, 0.5);
}

/* Seat Buttons */
.seat {
  width: 40px;
  height: 40px;
  background: rgba(255, 255, 255, 0.1);
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.6);
}

.seat:hover {
  background: rgba(255, 42, 109, 0.3);
  border-color: var(--pink);
  transform: scale(1.1);
}

.seat.selected {
  background: var(--pink);
  border-color: var(--pink);
  color: white;
  box-shadow: 0 4px 15px rgba(255, 42, 109, 0.5);
}

.seat.occupied {
  background: rgba(128, 128, 128, 0.3);
  border-color: rgba(128, 128, 128, 0.5);
  cursor: not-allowed;
  color: rgba(255, 255, 255, 0.3);
}

.seat.occupied:hover {
  transform: none;
  background: rgba(128, 128, 128, 0.3);
}

/* Cart Modal */
.cartModal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(8px);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 10000;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.cartModal.show {
  display: flex;
  opacity: 1;
}

.cartModalDialog {
  background: radial-gradient(circle at top left, #25122d 0%, #0d0b14 55%, #07060a 100%);
  border-radius: 20px;
  width: 90%;
  max-width: 600px;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 42, 109, 0.3);
  border: 1px solid rgba(255, 42, 109, 0.4);
  transform: scale(0.9) translateY(20px);
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  overflow: hidden;
}

.cartModal.show .cartModalDialog {
  transform: scale(1) translateY(0);
}

.cartModalHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 24px 28px;
  border-bottom: 1px solid rgba(255, 42, 109, 0.2);
  background: linear-gradient(135deg, rgba(255, 42, 109, 0.1), rgba(138, 43, 226, 0.1));
}

.cartModalHeader h2 {
  font-size: 1.75rem;
  font-weight: 700;
  background: linear-gradient(135deg, #fff, #ff2a6d);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin: 0;
  letter-spacing: 0.03em;
}

.cartModalClose {
  font-size: 1.8rem;
  color: #ff2a6d;
  cursor: pointer;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: all 0.2s ease;
  background: rgba(255, 42, 109, 0.1);
}

.cartModalClose:hover {
  color: white;
  background: rgba(255, 42, 109, 0.3);
  transform: rotate(90deg) scale(1.1);
}

.cartModalBody {
  flex: 1;
  overflow-y: auto;
  padding: 20px 28px;
  scrollbar-width: thin;
  scrollbar-color: #ff2a6d #1a1525;
}

.cartModalBody::-webkit-scrollbar {
  width: 8px;
}

.cartModalBody::-webkit-scrollbar-track {
  background: #1a1525;
  border-radius: 10px;
}

.cartModalBody::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #ff2a6d, #8a2be2);
  border-radius: 10px;
}

.cartModalBody::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, #ff5a8d, #a855f7);
}

.cartItemsList {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.cartItem {
  background: radial-gradient(circle at top left, rgba(255, 42, 109, 0.16), rgba(17, 13, 24, 0.95));
  border-radius: 12px;
  padding: 16px;
  color: #f5f5f5;
  border: 1px solid rgba(255, 42, 109, 0.3);
  transition: all 0.3s ease;
  position: relative;
  display: flex;
  gap: 16px;
  align-items: center;
}

.cartItem:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 24px rgba(255, 42, 109, 0.3);
  border-color: rgba(255, 42, 109, 0.7);
}

.cartItemImage {
  width: 80px;
  height: 80px;
  border-radius: 12px;
  object-fit: cover;
  border: 2px solid rgba(255, 42, 109, 0.3);
}

.cartItemContent {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.cartItemTitle {
  font-size: 1rem;
  font-weight: 600;
  color: #fff;
  margin: 0;
}

.cartItemSubtitle {
  font-size: 0.85rem;
  color: rgba(255, 255, 255, 0.6);
}

.cartItemRemove {
  position: absolute;
  top: 12px;
  right: 12px;
  background: rgba(255, 42, 109, 0.3);
  border: none;
  color: #fff;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  opacity: 0.8;
}

.cartItemRemove:hover {
  background: #ff2a6d;
  opacity: 1;
  transform: scale(1.15) rotate(90deg);
}

.cartEmpty {
  text-align: center;
  padding: 60px 20px;
  color: rgba(255, 255, 255, 0.6);
  font-size: 1.1rem;
}

.cartEmptyIcon {
  font-size: 4rem;
  margin-bottom: 16px;
  opacity: 0.5;
}

.cartModalFooter {
  padding: 20px 28px;
  border-top: 1px solid rgba(255, 42, 109, 0.2);
  background: linear-gradient(135deg, rgba(255, 42, 109, 0.05), rgba(138, 43, 226, 0.05));
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 16px;
}

.cartSummary {
  font-size: 1rem;
  color: #fff;
  font-weight: 600;
}

.checkout-btn {
  padding: 12px 28px;
  background: linear-gradient(135deg, #ff2a6d, #8a2be2);
  color: #fff;
  border: none;
  border-radius: 999px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(255, 42, 109, 0.4);
}

.checkout-btn:disabled {
  opacity: 0.45;
  cursor: default;
  box-shadow: none;
}

.checkout-btn:not(:disabled):hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(255, 42, 109, 0.6);
  background: linear-gradient(135deg, #ff5a8d, #a855f7);
}

/* Add-to-cart toast (left slide-in) */
.cart-toast {
  position: fixed;
  left: -260px;
  bottom: 30px;
  width: 240px;
  padding: 10px 14px;
  background: rgba(12, 12, 16, 0.96);
  border-radius: 8px;
  border: 1px solid rgba(255, 42, 109, 0.7);
  color: #fff;
  font-size: 0.9rem;
  display: flex;
  align-items: center;
  gap: 8px;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
  z-index: 12000;
  transition: left 0.35s ease;
}

.cart-toast.show {
  left: 20px;
}

.cart-toast-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #ff2a6d;
  box-shadow: 0 0 8px #ff2a6d;
}

.cart-toast.error {
  border-color: #ffb02a;
}

.cart-toast.error .cart-toast-dot {
  background: #ffb02a;
  box-shadow: 0 0 8px #ffb02a;
}
</style>
</head>
<body>

<div class="hero" id="hero">
    <nav>
        <div class="logo">
            <img class="icon" src="images/tvicon.png" />
            <h3 class="name">MoviesDen</h3>
        </div>

        <div class="navlinks">
            <a href="index.html">Home</a>
            <a href="movies.html">Movies</a>
            <a href="imax.html">IMAX</a>
            <a href="watch.html">Trailers</a>
        </div>

        <div class="icons" id="iconsContainer">
            <a id="cartIcon" class="cart-link" href="#"><i class="fas fa-shopping-cart"></i> <span id="cartCount">0</span></a>
            <a id="bar" href="#">â˜°</a>
            <div class="search-input-wrapper">
                <input type="text" id="searchInput" class="searchInput" placeholder="Search movies..." />
            </div>
            <a id="search" href="#">ðŸ”ï¸Ž</a>
            <a id="accountLink" href="ubaid.html" class="account-link">
                <i class="fas fa-user" id="accountIcon"></i>
                <img id="profilePicture" src="" alt="Profile" class="profile-picture-nav" style="display: none;">
            </a>
        </div>
    </nav>
    
    <div class="hero-slide active" style="background-image:url('images/suzume.jpg');" data-title="Suzume" data-year="2022" data-rating="â˜…â˜…â˜…â˜…â˜…" data-description="A 17-year-old girl must prevent disasters across Japan by closing mysterious doors that unleash destruction."></div>
    <div class="hero-slide" style="background-image:url('images/onepiece.jpg');" data-title="One Piece" data-year="1999" data-rating="â˜…â˜…â˜…â˜…â˜†" data-description="Monkey D. Luffy and his pirate crew search for the ultimate treasure to become the next Pirate King."></div>
    <div class="hero-slide" style="background-image:url('images/jujutsu.jpg');" data-title="Jujutsu Kaisen" data-year="2021" data-rating="â˜…â˜…â˜…â˜…â˜…" data-description="A boy swallows a cursed talisman and enters a world of jujutsu sorcerers to exorcise curses."></div>
    <div class="hero-slide" style="background-image:url('images/batman.jpg');" data-title="Batman" data-year="2008" data-rating="â˜…â˜…â˜…â˜…â˜…" data-description="When the menace known as the Joker wreaks havoc and chaos on the people of Gotham, Batman must accept one of the greatest psychological and physical tests of his ability to fight injustice."></div>
    <div class="hero-slide" style="background-image:url('images/dandadan.jpg');" data-title="Dandadan" data-year="2024" data-rating="â˜…â˜…â˜…â˜…â˜…" data-description="Join the adventures of momo okarun and jiji,into the hotsprings"></div>
    <div class="hero-slide" style="background-image:url('images/rob.jpg');" data-title="Batman Beyond" data-year="2023" data-rating="â˜…â˜…â˜…â˜…â˜…" data-description="The Dark Knight returns in a futuristic Gotham City, mentoring a new generation of heroes."></div>
    
    <div class="hero-slide " style="background-image:url('images/interstellar.jpg');" data-title="Interstellar" data-year="2014" data-rating="â˜…â˜…â˜…â˜…â˜…" data-description="A team of explorers travel through a wormhole in space in an attempt to ensure humanity's survival."></div>
    <div class="hero-slide" style="background-image:url('images/kai.jpg');" data-title="Shibuya Incident" data-year="2023" data-rating="â˜…â˜…â˜…â˜…â˜…" data-description="A group of teenagers are terrorized by a supernatural force in Shibuya, Tokyo."></div>
    <div class="hero-slide" style="background-image:url('images/Solo Leveling Poster.jpg');" data-title="Solo Leveling" data-year="2024" data-rating="â˜…â˜…â˜…â˜…â˜…" data-description="The weakest hunter Sung Jin-Woo embarks on an epic journey to become the strongest S-Rank hunter."></div>
    <div class="hero-slide" style="background-image:url('images/tanjiro.jpg');" data-title="Demon slayer" data-year="2001" data-rating="â˜…â˜…â˜…â˜…â˜…" data-description="Tanjiro Kamado, a human who was turned into a demon after consuming a Demon Fruit, begins a quest to become a Demon Slayer to avenge his family and his people."></div>
    <div class="hero-slide" style="background-image:url('images/POSTER STOP ONLINE Attack on Titan - Season 2 - TV Show Poster_Print (Key Art_Regular Style) (Size 24_ x 36_).jpg');" data-title="Attack on Titan" data-year="2013" data-rating="â˜…â˜…â˜…â˜…â˜…" data-description="Humanity fights for survival against man-eating Titans in a post-apocalyptic world."></div>
    <div class="hero-slide" style="background-image:url('images/Bleach\ Resonance\ Of\ Souls.jpg');" data-title="Bleach" data-year="2023" data-rating="â˜…â˜…â˜…â˜…â˜…" data-description="Its all a part of my perfect plan."></div>
    <div class="overlay">
        <div class="left">
            <div class="title" id="heroTitle">Interstellar</div>
            <div class="meta" id="heroMeta">2014 - Sci-Fi/Drama - Film</div>
            <div class="stars" id="heroStars">â˜…â˜…â˜…â˜…â˜…</div>
            <div class="desc" id="heroDescription">A team of explorers travel through a wormhole in space in an attempt to ensure humanity's survival.</div>
        </div>
        <button id="heroWishlistBtn"></button>
    </div>
</div>

<div class="categories">
    <button onclick="document.getElementById('action').scrollIntoView({behavior:'smooth'})">Action</button>
    <button onclick="document.getElementById('comedy').scrollIntoView({behavior:'smooth'})">Comedy</button>
    <button onclick="document.getElementById('drama').scrollIntoView({behavior:'smooth'})">Drama</button>
    <button onclick="document.getElementById('animeSlice').scrollIntoView({behavior:'smooth'})">Slice of Life Anime</button>
    <button onclick="document.getElementById('animeShonen').scrollIntoView({behavior:'smooth'})">Shonen Anime</button>
    <button onclick="document.getElementById('bollywood').scrollIntoView({behavior:'smooth'})">Bollywood</button>
    <button onclick="document.getElementById('trends').scrollIntoView({behavior:'smooth'})">Trends</button>
</div>

<div class="filter-bar">
    <label for="genreFilter">Filter by genre:</label>
    <select id="genreFilter">
        <option value="all">All</option>
        <option value="action">Action</option>
        <option value="comedy">Comedy</option>
        <option value="drama">Drama</option>
        <option value="animeSlice">Slice of Life Anime</option>
        <option value="animeShonen">Shonen Anime</option>
        <option value="bollywood">Bollywood</option>
    </select>
    <button id="randomBtn">Random order</button>
    <button id="wishlistBtn">Wishlist</button>
</div>

<div class="container">
  <div class="movies-section" id="movieContainer">
    <div id="action" class="movie-category-heading">Action<div class="line"></div></div>
    <div class="movie-row" id="actionRow"></div>
    <div id="animeShonen" class="movie-category-heading">Shonen Anime<div class="line"></div></div>
    <div class="movie-row" id="animeShonenRow"></div>
    <div id="comedy" class="movie-category-heading">Comedy<div class="line"></div></div>
    <div class="movie-row" id="comedyRow"></div>
    <div id="drama" class="movie-category-heading">Drama<div class="line"></div></div>
    <div class="movie-row" id="dramaRow"></div>
    <div id="animeSlice" class="movie-category-heading">Slice of Life Anime<div class="line"></div></div>
    <div class="movie-row" id="animeSliceRow"></div>
    <div id="bollywood" class="movie-category-heading">Bollywood<div class="line"></div></div>
    <div class="movie-row" id="bollywoodRow"></div>
  </div>

  <div class="trends-section" id="trends">
    <h2>TRENDS NOW</h2>
    <div class="trend-item"><img src="images/batman.jpg"><div><h4>Batman Beyond</h4><p>2022</p></div><div class="wishlist-icon" onclick="addToWishlistFromTrend(this, 'Batman Beyond', '2022', 'images/batman.jpg')"></div></div>
    <div class="trend-item"><img src="images/dandadan.jpg"><div><h4>Dandadan</h4><p>2025</p></div><div class="wishlist-icon" onclick="addToWishlistFromTrend(this, 'Dandadan', '2025', 'images/dandadan.jpg')"></div></div>
    <div class="trend-item"><img src="images/spiderverse.png"><div><h4>Spiderverse Beyond</h4><p>2024</p></div><div class="wishlist-icon" onclick="addToWishlistFromTrend(this, 'Spiderverse Beyond', '2024', 'images/spiderverse.png')"></div></div>
    <div class="trend-item"><img src="images/jujutsu.jpg"><div><h4>Jujutsu Kaisen</h4><p>2021</p></div><div class="wishlist-icon" onclick="addToWishlistFromTrend(this, 'Jujutsu Kaisen', '2021', 'images/jujutsu.jpg')"></div></div>
    <div class="trend-item"><img src="images/Solo Leveling Poster.jpg"><div><h4>Solo Leveling</h4><p>2024</p></div><div class="wishlist-icon" onclick="addToWishlistFromTrend(this, 'Solo Leveling', '2024', 'images/Solo Leveling Poster.jpg')"></div></div>
    <div class="trends-extra">
      <h3 style="margin:10px 0 6px;font-size:16px;">Discovery Picks</h3>
      <p style="font-size:12px;opacity:0.8;margin-bottom:6px;">Handâ€‘picked titles based on what people are watching right now.</p>
      <ul style="font-size:12px;opacity:0.8;list-style:none;padding-left:0;line-height:1.7;">
        <li>â€¢ Lateâ€‘night action marathons with backâ€‘toâ€‘back blockbusters.</li>
        <li>â€¢ Cozy sliceâ€‘ofâ€‘life anime for slow Sundays.</li>
        <li>â€¢ Awardâ€‘winning dramas that everyone is talking about.</li>
      </ul>
    </div>
    
    <!-- Newsletter & Author Comments Section (Desktop Only) -->
    <div class="newsletter-author-wrapper">
      <!-- Newsletter Signup -->
      <div class="newsletter-card">
        <div class="newsletter-icon">ðŸ“§</div>
        <h3 class="newsletter-title">Subscribe to Newsletter</h3>
        <form class="newsletter-form" onsubmit="handleNewsletterSubmit(event)">
          <input type="email" class="newsletter-input" placeholder="Enter your email address" required>
          <button type="submit" class="newsletter-btn">
            <span>Subscribe</span>
            <i class="fas fa-arrow-right"></i>
          </button>
        </form>
        <p class="newsletter-privacy">We respect your privacy. Unsubscribe at any time.</p>
      </div>

      <!-- Author Comments -->
      <div class="author-comments-card">
        <div class="author-header">
          <div class="author-avatar">
            <img src="images/suzume(1).jpg" alt="Author">
          </div>
          <div class="author-info">
            <h4 class="author-name">Alex Thompson</h4>
            <p class="author-role">Chief Curator</p>
          </div>
        </div>
        <div class="author-comment">
          <p>"As a film curator, I believe cinema is a window into different worlds and perspectives. Every movie we feature is carefully selected to bring you the best of storytelling. Our mission is to help you discover your next favorite film."</p>
        </div>
        <div class="author-signature">
          <span>â€” Alex & The MoviesDen Team</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Reviews Section -->
<section class="reviews-section">
  <div class="reviews-container">
    <h2 class="section-heading">REVIEWS</h2>
    
    <!-- Add Review Forms Side by Side (Only for logged-in users) -->
    <div id="addReviewsContainer" style="display: none; margin-bottom: 50px;">
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 25px; max-width: 1200px; margin: 0 auto;">
        
        <!-- Movie Review Form -->
        <div id="addReviewSection" style="background: rgba(17, 13, 24, 0.4); border-radius: 10px; padding: 20px; border: 1px solid rgba(255, 42, 109, 0.15); backdrop-filter: blur(10px);">
          <h3 style="color: rgba(255, 42, 109, 0.9); margin-bottom: 15px; font-size: 1rem; font-weight: 600;"><i class="fas fa-film"></i> Movie Review</h3>
          
          <div style="margin-bottom: 12px;">
            <label style="display: block; margin-bottom: 6px; color: rgba(255, 255, 255, 0.7); font-size: 0.85rem;">Movie Name</label>
            <input type="text" id="reviewMovieName" placeholder="Enter movie name" style="width: 100%; padding: 10px; background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 6px; color: white; font-size: 0.9rem;">
          </div>
          
          <div style="margin-bottom: 12px;">
            <label style="display: block; margin-bottom: 6px; color: rgba(255, 255, 255, 0.7); font-size: 0.85rem;">Rating</label>
            <div id="starRatingInput" style="display: flex; gap: 6px; font-size: 22px; cursor: pointer;">
              <span class="star-input" data-rating="1">â˜†</span>
              <span class="star-input" data-rating="2">â˜†</span>
              <span class="star-input" data-rating="3">â˜†</span>
              <span class="star-input" data-rating="4">â˜†</span>
              <span class="star-input" data-rating="5">â˜†</span>
            </div>
          </div>
          
          <div style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 6px; color: rgba(255, 255, 255, 0.7); font-size: 0.85rem;">Your Review</label>
            <textarea id="reviewText" placeholder="Share your thoughts..." style="width: 100%; padding: 10px; background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 6px; color: white; font-size: 0.9rem; min-height: 80px; height: 80px; resize: none;"></textarea>
          </div>
          
          <button id="submitReviewBtn" style="width: 100%; padding: 10px; margin: 0; background: rgba(255, 42, 109, 0.8); color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; transition: all 0.3s ease;">
            <i class="fas fa-paper-plane"></i> Submit
          </button>
        </div>
        
        <!-- Theatre Review Form -->
        <div id="addTheatreReviewSection" class="review-form-card" style="background: rgba(17, 13, 24, 0.4); border-radius: 10px; padding: 20px; border: 1px solid rgba(255, 42, 109, 0.15); backdrop-filter: blur(10px); min-height: 420px;">
          <h3 style="color: rgba(255, 42, 109, 0.9); margin-bottom: 15px; font-size: 1rem; font-weight: 600;"><i class="fas fa-theater-masks"></i> Theatre Review</h3>
          
          <div style="margin-bottom: 12px;">
            <label style="display: block; margin-bottom: 6px; color: rgba(255, 255, 255, 0.7); font-size: 0.85rem;">Theatre Name</label>
            <input type="text" id="theatreName" placeholder="Enter theatre name" style="width: 100%; padding: 10px; background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 6px; color: white; font-size: 0.9rem;">
          </div>
          
          <div style="margin-bottom: 12px;">
            <label style="display: block; margin-bottom: 6px; color: rgba(255, 255, 255, 0.7); font-size: 0.85rem;">Location</label>
            <input type="text" id="theatreLocation" placeholder="Enter location" style="width: 100%; padding: 10px; background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 6px; color: white; font-size: 0.9rem;">
          </div>
          
          <div style="margin-bottom: 12px;">
            <label style="display: block; margin-bottom: 6px; color: rgba(255, 255, 255, 0.7); font-size: 0.85rem;">Rating</label>
            <div id="theatreStarRatingInput" style="display: flex; gap: 6px; font-size: 22px; cursor: pointer;">
              <span class="theatre-star-input" data-rating="1">â˜†</span>
              <span class="theatre-star-input" data-rating="2">â˜†</span>
              <span class="theatre-star-input" data-rating="3">â˜†</span>
              <span class="theatre-star-input" data-rating="4">â˜†</span>
              <span class="theatre-star-input" data-rating="5">â˜†</span>
            </div>
          </div>
          
          <div style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 6px; color: rgba(255, 255, 255, 0.7); font-size: 0.85rem;">Your Review</label>
            <textarea id="theatreReviewText" placeholder="Share your experience..." style="width: 100%; padding: 10px; background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 6px; color: white; font-size: 0.9rem; min-height: 80px; height: 80px; resize: none;"></textarea>
          </div>
          
          <button id="submitTheatreReviewBtn" style="width: 100%; padding: 10px; margin: 0; background: rgba(255, 42, 109, 0.8); color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 0.9rem; transition: all 0.3s ease;">
            <i class="fas fa-paper-plane"></i> Submit
          </button>
        </div>
        
      </div>
    </div>
    
    <h3 class="section-heading" style="font-size: 1.3rem; margin-bottom: 30px;">Movie Reviews</h3>
    
    <div class="reviews-grid" id="movieReviewsGrid">
      <div class="review-card">
        <div class="review-header">
          <img src="images/batman.jpg" alt="Reviewer">
        </div>
        <div class="review-content">
          <div class="reviewer-info">
            <h4><i class="fas fa-user"></i> Sarah Johnson</h4>
            <div class="star-rating">â˜…â˜…â˜…â˜…â˜…</div>
          </div>
          <p class="review-text">Absolutely breathtaking! Top-notch cinematography.</p>
          <span class="review-movie"><i class="fas fa-film"></i> Interstellar</span>
        </div>
      </div>
      
      <div class="review-card">
        <div class="review-header">
          <img src="images/onepiece.jpg" alt="Reviewer">
        </div>
        <div class="review-content">
          <div class="reviewer-info">
            <h4><i class="fas fa-user"></i> Michael Chen</h4>
            <div class="star-rating">â˜…â˜…â˜…â˜…â˜†</div>
          </div>
          <p class="review-text">A visual masterpiece with incredible world-building.</p>
          <span class="review-movie"><i class="fas fa-film"></i> Dune</span>
        </div>
      </div>
      
      <div class="review-card">
        <div class="review-header">
          <img src="images/dandadan(1).jpg" alt="Reviewer">
        </div>
        <div class="review-content">
          <div class="reviewer-info">
            <h4><i class="fas fa-user"></i> Emily Rodriguez</h4>
            <div class="star-rating">â˜…â˜…â˜…â˜…â˜…</div>
          </div>
          <p class="review-text">One of the best films this year. Engaging throughout.</p>
          <span class="review-movie"><i class="fas fa-film"></i> The Dark Knight</span>
        </div>
      </div>
      
      <div class="review-card">
        <div class="review-header">
          <img src="images/kai.jpg" alt="Reviewer">
        </div>
        <div class="review-content">
          <div class="reviewer-info">
            <h4><i class="fas fa-user"></i> David Park</h4>
            <div class="star-rating">â˜…â˜…â˜…â˜…â˜†</div>
          </div>
          <p class="review-text">Excellent pacing and stunning visuals.</p>
          <span class="review-movie"><i class="fas fa-film"></i> Inception</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Theatre Reviews Section -->
<section class="theatre-reviews-section">
  <div class="reviews-container">
    <h3 class="section-heading" style="font-size: 1.3rem; margin-bottom: 30px;">Theatre Reviews</h3>
    
    <div class="theatre-reviews-grid" id="theatreReviewsGrid">
      <div class="theatre-review-card">
        <div class="theatre-info">
          <h3><i class="fas fa-theater-masks"></i> Grand Cinema IMAX</h3>
          <div class="theatre-location"><i class="fas fa-map-marker-alt"></i> Downtown District</div>
        </div>
        <div class="theatre-rating">
          <div class="star-rating">â˜…â˜…â˜…â˜…â˜…</div>
          <span class="rating-text">4.8/5</span>
        </div>
        <p class="theatre-review-text">Best IMAX experience in the city! Crystal clear picture and immersive sound.</p>
        <div class="reviewer-name"><i class="fas fa-pen"></i> Alex Thompson</div>
      </div>
      
      <div class="theatre-review-card">
        <div class="theatre-info">
          <h3><i class="fas fa-theater-masks"></i> Cinema Luxe</h3>
          <div class="theatre-location"><i class="fas fa-map-marker-alt"></i> Entertainment Plaza</div>
        </div>
        <div class="theatre-rating">
          <div class="star-rating">â˜…â˜…â˜…â˜…â˜†</div>
          <span class="rating-text">4.6/5</span>
        </div>
        <p class="theatre-review-text">Premium experience with excellent service. The Dolby Atmos sound system is phenomenal.</p>
        <div class="reviewer-name"><i class="fas fa-pen"></i> Jessica Martinez</div>
      </div>
      
      <div class="theatre-review-card">
        <div class="theatre-info">
          <h3><i class="fas fa-theater-masks"></i> Starlight Theatre</h3>
          <div class="theatre-location"><i class="fas fa-map-marker-alt"></i> Central Avenue</div>
        </div>
        <div class="theatre-rating">
          <div class="star-rating">â˜…â˜…â˜…â˜…â˜…</div>
          <span class="rating-text">4.9/5</span>
        </div>
        <p class="theatre-review-text">Perfect for date nights! Cozy atmosphere and great selection of snacks.</p>
        <div class="reviewer-name"><i class="fas fa-pen"></i> Ryan Kim</div>
      </div>
    </div>
  </div>
</section>


<div id="toast" class="toast">
  <span id="toastText"></span>
</div>

<footer class="footer" id="footer">
  <!-- Two small balls -->
  <div id="bubble1" class="jelly"></div>
  <div id="bubble2" class="jelly"></div>

  <div class="footer-content">
    <div class="footer-section">
      <h3>MoviesDen</h3>
      <p>Your go-to anime & movie streaming platform.</p>
    </div>

    <div class="footer-section">
      <h4>Quick Links</h4>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="movies.html">Movies</a></li>
        <li><a href="imax.html">IMAX</a></li>
        <li><a href="watch.html">Trailers</a></li>
      </ul>
    </div>

    <div class="footer-section">
      <h4>Company</h4>
      <ul>
        <li><a href="about.html">About Us</a></li>
        <li><a href="contact (1) (1).html">Contact Us</a></li>
        <li><a href="privacy (1).html">Privacy Policy</a></li>
        <li><a href="gallery.html">Gallery</a></li>
        <li><a href="upcoming.html">Upcoming</a></li>
        <li><a href="awards,faq.html">Awards & FAQ</a></li>
      </ul>
    </div>

    <div class="footer-section">
      <h4>Follow Us</h4>
      <ul class="social-icons">
        <li><a href="https://youtube.com" target="_blank" rel="noopener" aria-label="YouTube" data-tooltip="YouTube"><i class="fab fa-youtube"></i></a></li>
        <li><a href="https://instagram.com" target="_blank" rel="noopener" aria-label="Instagram" data-tooltip="Instagram"><i class="fab fa-instagram"></i></a></li>
        <li><a href="https://facebook.com" target="_blank" rel="noopener" aria-label="Facebook" data-tooltip="Facebook"><i class="fab fa-facebook"></i></a></li>
        <li><a href="https://discord.com" target="_blank" rel="noopener" aria-label="Discord" data-tooltip="Discord"><i class="fab fa-discord"></i></a></li>
      </ul>
    </div>
  </div>

  <p class="footer-bottom">Â© 2025 MoviesDen â€” All rights reserved.</p>
</footer>

<!-- WISHLIST MODAL -->
<div class="modal" id="wishlistModal" style="align-items:flex-start;">
  <div class="modal-content" style="max-width:520px;">
    <div class="modal-header">
      <div class="modal-header-left">
        <h4 class="modal-title">Your Wishlist</h4>
        <div class="modal-rating" id="wishlistCountText"></div>
      </div>
      <span class="close-modal" onclick="closeWishlistModal()">Ã—</span>
    </div>
    <div id="wishlistItems" style="display:flex;flex-wrap:wrap;gap:10px;max-height:260px;overflow:auto;"></div>
  </div>
</div>

<!-- TICKET MODAL -->


<script>
// HERO CAROUSEL
let slides=document.querySelectorAll(".hero-slide"); let index=0;
function updateHeroContent() {
    const activeSlide = document.querySelector(".hero-slide.active");
    if (!activeSlide) return;
    
    const title = activeSlide.getAttribute("data-title") || "";
    const year = activeSlide.getAttribute("data-year") || "";
    const rating = activeSlide.getAttribute("data-rating") || "";
    const description = activeSlide.getAttribute("data-description") || "";
    
    // Determine genre based on title or use default
    let genre = "Sci-Fi/Drama";
    if (title.includes("Dark Knight") || title.includes("Batman")) genre = "Action/Thriller";
    if (title.includes("Jumanji")) genre = "Adventure/Comedy";
    if (title.includes("Jujutsu Kaisen")) genre = "Action/Supernatural";
    
    const heroTitle = document.querySelector(".hero .overlay .title");
    const heroMeta = document.querySelector(".hero .overlay .meta");
    const heroStars = document.querySelector(".hero .overlay .stars");
    const heroDescription = document.querySelector(".hero .overlay .desc");
    
    if (heroTitle) heroTitle.textContent = title;
    if (heroMeta) heroMeta.textContent = `${year} - ${genre} - Film`;
    if (heroStars) {
        heroStars.innerHTML = `<span style="color: gold; display: flex; gap: 4px; justify-content: flex-start;">${rating}</span>`;
    }
    if (heroDescription) heroDescription.textContent = description;
}

function nextSlide(){
    slides[index].classList.remove("active"); 
    index=(index+1)%slides.length; 
    slides[index].classList.add("active");
    updateHeroContent();
}
setInterval(nextSlide,5000);
// Initialize hero content on page load
updateHeroContent();

// HERO WISHLIST BUTTON â€“ add current hero movie to wishlist
const heroWishlistBtn = document.getElementById("heroWishlistBtn");
if (heroWishlistBtn){
  heroWishlistBtn.addEventListener("click", ()=>{
    // Check if user is logged in
    if (!isLoggedIn()) {
      showLoginPopup();
      return;
    }
    
    heroWishlistBtn.classList.toggle("active");
    const isActive = heroWishlistBtn.classList.contains("active");
    
    const activeSlide = document.querySelector(".hero-slide.active");
    if (!activeSlide) return;
    const title = activeSlide.getAttribute("data-title");
    if (!title) return;
    
    // Get hero image
    const heroImg = activeSlide.style.backgroundImage;
    let imgSrc = 'images/dune.jpg';
    if (heroImg) {
      const match = heroImg.match(/url\(["']?([^"')]+)["']?\)/);
      if (match && match[1]) {
        imgSrc = match[1];
      }
    }
    
    const currentUser = localStorage.getItem('currentUser');
    let wishlist = JSON.parse(localStorage.getItem('wishlist_' + currentUser) || '[]');
    
    if (isActive) {
      // Add to wishlist if not already there
      if (!wishlist.find(item => item.title === title)) {
        wishlist.push({ title, img: imgSrc, image: imgSrc });
      }
    } else {
      // Remove from wishlist
      wishlist = wishlist.filter(item => item.title !== title);
    }
    
    // Save to localStorage
    localStorage.setItem('wishlist_' + currentUser, JSON.stringify(wishlist));
    localStorage.setItem('wishlistItems', JSON.stringify(wishlist));

    const cards = document.querySelectorAll(".movie-card");
    let matched = false;
    cards.forEach(card => {
      const h4 = card.querySelector(".movie-info h4");
      const wBtn = card.querySelector(".wishlist-btn");
      if (h4 && wBtn && h4.textContent.trim() === title){
        if (isActive && !wBtn.classList.contains("active")){
          wBtn.classList.add("active");
          matched = true;
        } else if (!isActive && wBtn.classList.contains("active")){
          wBtn.classList.remove("active");
          matched = true;
        }
      }
    });
    if (matched){
      showToast(isActive ? "Added from hero to wishlist" : "Removed from wishlist");
    } else {
      showToast(isActive ? "Added to wishlist" : "Removed from wishlist");
    }
  });
}

// MOVIES DATA  [title, year, ratingStars, imagePath, category]
const movies=[
  ["Dune",2021,"â˜…â˜…â˜…â˜…â˜…","images/dunee.jpg","action"],
  ["Batman",2022,"â˜…â˜…â˜…â˜…â˜…","images/bhi.jpg","action"],
  ["Avatar",2009,"â˜…â˜…â˜…â˜…â˜†","images/avatar.jpg","action"],
  ["Bad Guys",2022,"â˜…â˜…â˜…â˜…â˜…","images/bad.jpg","action"],
  ["Squid Game",2021,"â˜…â˜…â˜…â˜…â˜…","images/Squid Game.jpg","action"],
  ["The Specs",2025,"â˜…â˜…â˜…â˜…â˜…","images/specs.jpg","action"],
  ["Deadpool",2016,"â˜…â˜…â˜…â˜…â˜†","images/deadpool.jpg","action"],
  ["Loki",2021,"â˜…â˜…â˜…â˜…â˜…","images/loki.jpg","action"],

  ["Encanto",2021,"â˜…â˜…â˜…â˜…â˜…","images/Encanto.jpg","comedy"],
  ["Moana",2016,"â˜…â˜…â˜…â˜…â˜†","images/New Movie Posters for Moana.jpg","comedy"],
  ["Turning Red",2022,"â˜…â˜…â˜…â˜…â˜†","images/Turning red movie.jpg","comedy"],
  ["Elemental",2023,"â˜…â˜…â˜…â˜…â˜†","images/Disney Pixar Elemental Movie Review.jpg","comedy"],
  ["Gumball",2023,"â˜…â˜…â˜…â˜…â˜†","images/gumball.png","comedy"],
  ["Up",2009,"â˜…â˜…â˜…â˜…â˜…","images/up.jpg","comedy"],

  ["Interstellar",2014,"â˜…â˜…â˜…â˜…â˜…","images/interstellar.jpg","drama"],
  ["Oppenheimer",2023,"â˜…â˜…â˜…â˜…â˜…","images/oppenheimer.png","drama"],
  ["The Walking Dead",2010,"â˜…â˜…â˜…â˜…â˜…","images/The Walking Dead Season 3 Poster.jpg","drama"],
  ["The Last of Us",2023,"â˜…â˜…â˜…â˜…â˜…","images/The last of us Font - forum.jpg","drama"],
  ["Parasyte",2024,"â˜…â˜…â˜…â˜…â˜†","images/Parasyte_ The Grey (2024) Netflix Kdrama New Poster Added.jpg","drama"],

  ["Death parade",2024,"â˜…â˜…â˜…â˜…â˜…","images/parade.png","animeSlice"],
  ["Suzume",2022,"â˜…â˜…â˜…â˜…â˜…","images/Suzume (2022) - Makoto Shinkai.jpg","animeSlice"],
  ["The fragnant flower",2025,"â˜…â˜…â˜…â˜…â˜…","images/waguri.jpg","animeSlice"],
  ["Weathering With You",2019,"â˜…â˜…â˜…â˜…â˜…","images/weathering.jpg","animeSlice"],
  ["A Silent Voice",2016,"â˜…â˜…â˜…â˜…â˜…","images/silent voice.jpg","animeSlice"],
  ["The Garden of Words",2013,"â˜…â˜…â˜…â˜…â˜†","images/suzume.jpg","animeSlice"],
  ["The Great Pretender",2007,"â˜…â˜…â˜…â˜…â˜†","images/great.jpg","animeSlice"],
  ["Kiki's Delivery Service",1989,"â˜…â˜…â˜…â˜…â˜…","images/kiki.jpg","animeSlice"],
  ["Lost in starlight",1988,"â˜…â˜…â˜…â˜…â˜…","images/Lost in Starlight.jpg","animeSlice"],
  ["Howl's Moving Castle",2004,"â˜…â˜…â˜…â˜…â˜…","images/castle.jpg","animeSlice"],
  ["Five centimeters per second",2022,"â˜…â˜…â˜…â˜…â˜†","images/5.jpg","animeSlice"],
  ["Grave of the fireflies",1995,"â˜…â˜…â˜…â˜…â˜†","images/grave.jpg","animeSlice"],

  ["Jujutsu Kaisen",2021,"â˜…â˜…â˜…â˜…â˜…","images/jujutsu.jpg","animeShonen"],
  ["One Piece",1999,"â˜…â˜…â˜…â˜…â˜†","images/Luffy.jpg","animeShonen"],
  ["Naruto",2002,"â˜…â˜…â˜…â˜…â˜†","images/naruto.jpg","animeShonen"],
  ["Attack on Titan",2013,"â˜…â˜…â˜…â˜…â˜…","images/POSTER STOP ONLINE Attack on Titan - Season 2 - TV Show Poster_Print (Key Art_Regular Style) (Size 24_ x 36_).jpg","animeShonen"],
  ["Bleach",2004,"â˜…â˜…â˜…â˜…â˜†","images/Bleach Resonance Of Souls.jpg","animeShonen"],
  ["Solo Leveling",2024,"â˜…â˜…â˜…â˜…â˜…","images/Solo Leveling Poster.jpg","animeShonen"],
  ["My Hero Academia",2016,"â˜…â˜…â˜…â˜…â˜†","images/My Hero Academia_ Season 6 - Key Art Wall Poster, 22_375_ x 34_ - Walmart.ca","animeShonen"],

  ["3 Idiots",2009,"â˜…â˜…â˜…â˜…â˜…","images/3 Idiots (2009)_.jpg","bollywood"],
  ["Dhamaal",2007,"â˜…â˜…â˜…â˜…â˜…","images/TOTAL DHAMAAL.jpg","bollywood"],
  ["Hera Pheri",2000,"â˜…â˜…â˜…â˜…â˜…","images/Watch Phir Hera Pheri Full Movie HD facts Online free.jpg","bollywood"],
  ["Welcome",2007,"â˜…â˜…â˜…â˜…â˜†","images/Welcome Back Cast is back with the addition of John Abraham!.jpg","bollywood"],
  ["Golmaal",2006,"â˜…â˜…â˜…â˜…â˜†","images/Golmaal Again (2017) de Rohit Shetty - tt1806913.jpg","bollywood"],
  ["Chup Chup Ke",2006,"â˜…â˜…â˜…â˜…â˜†","images/Chup chup ke 2006 shahid Kapoor Kareena.jpg","bollywood"],
  ["Hungama",2003,"â˜…â˜…â˜…â˜…â˜†","images/Hungama (2003).jpg","bollywood"],
  ["Bajrangi Bhaijaan",2015,"â˜…â˜…â˜…â˜…â˜…","images/bhaijaan.jpg","bollywood"],
  ["Sultan",2016,"â˜…â˜…â˜…â˜…â˜…","images/New HD Movie Download_ Sultan Full Movie Download.jpg","bollywood"],
  ["Pathaan",2023,"â˜…â˜…â˜…â˜…â˜†","images/Pathaan.jpg","bollywood"],
  ["Dangal",2016,"â˜…â˜…â˜…â˜…â˜…","images/Dangal (2016) - Nitesh Tiwari.jpg","bollywood"],
  ["PK",2014,"â˜…â˜…â˜…â˜…â˜†","images/PK _ PEEKAY _ 2014.jpg","bollywood"],
  ["Zindagi Na Milegi Dobara",2011,"â˜…â˜…â˜…â˜…â˜…","images/Zindagi na milegi dobara (2011) - Zoya Akhtar.jpg","bollywood"]
];

// shuffle helper
function shuffle(array){
  const arr = array.slice();
  for(let i = arr.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

// create movie cards for a given list (respecting categories)
function renderMovies(list){
  const rows = {
    action: document.getElementById("actionRow"),
    animeShonen: document.getElementById("animeShonenRow"),
    comedy: document.getElementById("comedyRow"),
    drama: document.getElementById("dramaRow"),
    animeSlice: document.getElementById("animeSliceRow"),
    bollywood: document.getElementById("bollywoodRow")
  };

  Object.values(rows).forEach(r => { if(r) r.innerHTML = ""; });

  list.forEach(m => {
    const row = rows[m[4]];
    if (!row) return;

    const card=document.createElement("div");
    card.className="movie-card";
    card.innerHTML=`<img src="${m[3]}">
    <div class="movie-info"><h4>${m[0]}</h4><span class="year">${m[1]}</span></div>
    <button class="wishlist-btn"></button>
    <button class="info-btn">X</button>
    <div class="movie-hover">
      <h4>${m[0]}</h4>
      <span class="year">${m[1]}</span>
      <div class="stars">${m[2]}</div>
      <button class="buy-btn">Buy</button>
    </div>`;
    row.appendChild(card);

    // Wishlist
    const wishlistBtn = card.querySelector(".wishlist-btn");
    wishlistBtn.addEventListener("click", ()=>{
        // Check if user is logged in
        if (!isLoggedIn()) {
          showLoginPopup();
          return;
        }
        
        const title = m[0];
        const img = m[3];
        const isActive = wishlistBtn.classList.contains("active");
        const currentUser = localStorage.getItem('currentUser');
        
        // Load wishlist from localStorage
        let wishlist = JSON.parse(localStorage.getItem('wishlist_' + currentUser) || '[]');
        
        if (isActive) {
          // Remove from wishlist
          wishlist = wishlist.filter(item => item.title !== title);
          wishlistBtn.classList.remove("active");
          showToast("Removed from wishlist");
        } else {
          // Add to wishlist
          wishlist.push({ title, img, image: img });
          wishlistBtn.classList.add("active");
          showToast("Added to wishlist");
        }
        
        // Save to localStorage with user-specific key
        localStorage.setItem('wishlist_' + currentUser, JSON.stringify(wishlist));
        // Also save to general key for compatibility
        localStorage.setItem('wishlistItems', JSON.stringify(wishlist));
    });

    // Hide button & unhide overlay
    const infoBtn = card.querySelector(".info-btn");
    infoBtn.addEventListener("click", (e)=>{
        e.stopPropagation();
        const existingOverlay = card.querySelector(".hidden-overlay");

        if (!card.classList.contains("blurred")) {
            card.classList.add("blurred");
            const overlay = document.createElement("div");
            overlay.className="hidden-overlay";
            overlay.innerHTML="Content Hidden<br><span style='color:white; cursor:pointer;'>Unhide</span>";
            overlay.querySelector("span").onclick = (ev)=>{
                ev.stopPropagation();
                card.classList.remove("blurred");
                overlay.remove();
                showToast("Content visible again");
            };
            card.appendChild(overlay);

            const toastMsg = wishlistBtn.classList.contains("active")
              ? "Content hidden and saved in wishlist"
              : "Content hidden";
            showToast(toastMsg);
        } else {
            card.classList.remove("blurred");
            if (existingOverlay) existingOverlay.remove();
            showToast("Content visible again");
        }
    });

    // Buy button is now handled by setupCart() function which opens the ticket modal
    // Removed old direct add-to-cart logic
  });
  
  // Re-setup cart buttons for newly created movie cards
  setupCart();
}

function applyFilterAndRender(){
  const genreFilterEl = document.getElementById("genreFilter");
  const genre = genreFilterEl ? genreFilterEl.value : "all";
  const query = "";

  // Hide/show genre sections based on filter
  const genreSections = {
    'action': document.getElementById('action'),
    'comedy': document.getElementById('comedy'),
    'drama': document.getElementById('drama'),
    'animeSlice': document.getElementById('animeSlice'),
    'animeShonen': document.getElementById('animeShonen'),
    'bollywood': document.getElementById('bollywood')
  };

  Object.keys(genreSections).forEach(genreKey => {
    const heading = genreSections[genreKey];
    const row = document.getElementById(genreKey + 'Row');
    
    if (genre === 'all') {
      // Show all sections
      if (heading) heading.style.display = 'block';
      if (row) row.style.display = 'flex';
    } else {
      // Hide all except selected
      if (heading) heading.style.display = (genreKey === genre) ? 'block' : 'none';
      if (row) row.style.display = (genreKey === genre) ? 'flex' : 'none';
    }
  });

  let filtered = movies.filter(m => {
    const matchesGenre = (genre === "all" || m[4] === genre);
    const matchesSearch = !query || m[0].toLowerCase().includes(query);
    return matchesGenre && matchesSearch;
  });

  if (window._randomizeOrder){
    filtered = shuffle(filtered);
  }

  renderMovies(filtered);
}

// setup filter + random controls
window._randomizeOrder = false;
const genreFilterEl = document.getElementById("genreFilter");
if (genreFilterEl){
  genreFilterEl.addEventListener("change", ()=>{
    window._randomizeOrder = false;
    applyFilterAndRender();
  });
}


const randomBtn = document.getElementById("randomBtn");
if (randomBtn){
  randomBtn.addEventListener("click", ()=>{
    window._randomizeOrder = true;
    applyFilterAndRender();
  });
}

// wishlist modal controls
const wishlistOpenBtn = document.getElementById("wishlistBtn");
if (wishlistOpenBtn){
  wishlistOpenBtn.addEventListener("click", ()=>{
    const modal = document.getElementById("wishlistModal");
    const listEl = document.getElementById("wishlistItems");
    const countEl = document.getElementById("wishlistCountText");
    if (!modal || !listEl) return;
    listEl.innerHTML = "";

    const activeCards = Array.from(document.querySelectorAll(".movie-card"))
      .filter(c => c.querySelector(".wishlist-btn") && c.querySelector(".wishlist-btn").classList.contains("active"));

    activeCards.forEach(card => {
      const img = card.querySelector("img");
      const title = card.querySelector(".movie-info h4")?.textContent || "";
      const year = card.querySelector(".movie-info .year")?.textContent || "";
      const mini = document.createElement("div");
      mini.style.display = "flex";
      mini.style.gap = "8px";
      mini.style.alignItems = "center";
      mini.style.background = "#0c0c1c";
      mini.style.padding = "6px 8px";
      mini.style.borderRadius = "10px";
      mini.style.flex = "1 1 150px";

      mini.innerHTML = `<img src="${img ? img.src : ""}" style="width:48px;height:64px;border-radius:6px;object-fit:cover;" alt="${title}">
        <div style="font-size:12px;">
          <div style="font-weight:600;margin-bottom:2px;">${title}</div>
          <div style="opacity:0.8;">${year}</div>
        </div>`;
      listEl.appendChild(mini);
    });

    if (countEl){
      countEl.textContent = activeCards.length ? `${activeCards.length} item(s) saved` : "No movies in wishlist yet";
    }
    modal.classList.add("show");
  });
}

// initial render
applyFilterAndRender();

// TICKET MODAL FUNCTIONS
let selectedTime="", selectedShow="", selectedSeat="";


// Tab switching for view shows modal
document.addEventListener('DOMContentLoaded', function() {
  // Close modals when clicking outside
  const checkoutModal = document.getElementById('checkoutModal');
  if (checkoutModal) {
    checkoutModal.addEventListener('click', function(e) {
      if (e.target === this) {
        checkoutModal.classList.remove('show');
      }
    });
  }
  
  // Close modals on ESC key
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      if (checkoutModal) {
        checkoutModal.classList.remove('show');
      }
      closeModal();
    }
  });
  
  // Close button handlers
  const viewShowsClose = document.getElementById('viewShowsClose');
  if (viewShowsClose) {
    viewShowsClose.addEventListener('click', closeViewShowsModal);
  }
  
  const checkoutModalClose = document.getElementById('checkoutModalClose');
  if (checkoutModalClose) {
    checkoutModalClose.addEventListener('click', function() {
      if (checkoutModal) {
        checkoutModal.classList.remove('show');
      }
    });
  }
  
  // Checkout cancel button
  const checkoutCancel = document.getElementById('checkoutCancel');
  if (checkoutCancel) {
    checkoutCancel.addEventListener('click', function() {
      if (checkoutModal) {
        checkoutModal.classList.remove('show');
      }
    });
  }
});

function closeModal(){
  const modal = document.getElementById("ticketModal");
  if (modal) {
    modal.classList.remove("show");
  }
}

function closeWishlistModal(){
  const modal = document.getElementById("wishlistModal");
  if (modal) {
    modal.classList.remove("show");
  }
}

// Close ticket modal on ESC key
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeModal();
    closeWishlistModal();
    closeViewShowsModal();
    const checkoutModal = document.getElementById('checkoutModal');
    if (checkoutModal && checkoutModal.classList.contains('show')) {
      checkoutModal.classList.remove('show');
    }
  }
});

// Close ticket modal when clicking outside
document.addEventListener('DOMContentLoaded', function() {
  const ticketModal = document.getElementById('ticketModal');
  if (ticketModal) {
    ticketModal.addEventListener('click', function(e) {
      if (e.target === ticketModal) {
        closeModal();
      }
    });
  }
});

// Toast helper
function showToast(message, isError = false, isSuccess = false){
  const toast = document.getElementById("toast");
  if (!toast) {
    console.error("Toast element not found");
    return;
  }
  const textEl = document.getElementById("toastText");
  if (textEl) textEl.textContent = message;
  
  // Remove previous classes
  toast.classList.remove("error", "success");
  
  // Add appropriate class
  if (isError) {
    toast.classList.add("error");
  } else if (isSuccess) {
    toast.classList.add("success");
  }
  
  toast.classList.add("show");
  clearTimeout(window._toastTimer);
  window._toastTimer = setTimeout(()=>{
    toast.classList.remove("show");
  }, 3000); // Increased duration for better visibility
}

// ===== Mobile Nav (Hamburger) =====
const burgerBtn = document.getElementById("bar");
const navLinksEl = document.querySelector(".navlinks");

if (burgerBtn && navLinksEl) {
  burgerBtn.addEventListener("click", (e) => {
    e.preventDefault();
    navLinksEl.classList.toggle("show");
  });

  // Close nav when a link is clicked (on mobile)
  navLinksEl.querySelectorAll("a").forEach((link) => {
    link.addEventListener("click", () => {
      navLinksEl.classList.remove("show");
    });
  });
  
  // Re-setup cart buttons for newly created movie cards
  setupCart();
}

// ===== NAVBAR EXPANDABLE SEARCH =====
const searchBtn = document.getElementById("search");
const iconsContainer = document.getElementById("iconsContainer");
const searchInput = document.getElementById("searchInput");
let searchIndex = [];

function buildSearchIndex() {
  searchIndex = [];

  // Movie cards
  document.querySelectorAll(".movie-card").forEach(card => {
    const titleEl = card.querySelector("h4");
    if (!titleEl) return;
    const name = titleEl.textContent.trim();
    if (!name) return;
    searchIndex.push({ name, element: card });
  });

  // Hero slides
  document.querySelectorAll(".hero-slide").forEach(slide => {
    const title = slide.getAttribute("data-title");
    if (!title) return;
    searchIndex.push({ name: title, element: slide });
  });
}

function highlightAndScrollTo(el) {
  if (!el) return;
  el.scrollIntoView({ behavior: "smooth", block: "center" });
  el.style.boxShadow = "0 0 0 2px rgba(255, 42, 109, 0.75), 0 0 18px rgba(255, 42, 109, 0.75)";
  el.style.transform = "translateY(-3px)";
  setTimeout(() => {
    el.style.boxShadow = "";
    el.style.transform = "";
  }, 1400);
}

// Expand search on navbar search icon click
if (searchBtn && iconsContainer) {
  searchBtn.addEventListener("click", (e) => {
    e.preventDefault();
    iconsContainer.classList.toggle("search-expanded");
    buildSearchIndex();
    
    if (iconsContainer.classList.contains("search-expanded")) {
      setTimeout(() => {
        if (searchInput) searchInput.focus();
      }, 200);
    }
  });
}

// Handle search input
if (searchInput) {
  searchInput.addEventListener("keyup", (e) => {
    if (e.key === "Enter") {
      const query = searchInput.value.toLowerCase().trim();
      if (!query) return;
      
      const match = searchIndex.find(item => 
        item.name.toLowerCase().includes(query)
      );
      
      if (match) {
        iconsContainer.classList.remove("search-expanded");
        searchInput.value = "";
        setTimeout(() => {
          highlightAndScrollTo(match.element);
        }, 300);
      } else {
        // Show toast if no match found
        const toast = document.getElementById("toast");
        const toastText = document.getElementById("toastText");
        if (toast && toastText) {
          toastText.textContent = "No movie found with that name";
          toast.classList.add("show");
          setTimeout(() => toast.classList.remove("show"), 2000);
        }
      }
    }
  });
  
  // Close on escape
  searchInput.addEventListener("keydown", (e) => {
    if (e.key === "Escape") {
      iconsContainer.classList.remove("search-expanded");
      searchInput.value = "";
    }
  });
}

// Close search when clicking outside
document.addEventListener("click", (e) => {
  if (iconsContainer && iconsContainer.classList.contains("search-expanded")) {
    if (!iconsContainer.contains(e.target) && e.target.id !== "search") {
      iconsContainer.classList.remove("search-expanded");
      if (searchInput) searchInput.value = "";
    }
  }
});

// CHECKOUT MODAL - Initialize after DOM is loaded
// NOTE: This function is now disabled - the working checkout handler is in setupCart() function
function initCheckoutModal() {
    const checkoutModal = document.getElementById("checkoutModal");
    const checkoutCancel = document.getElementById("checkoutCancel");
    const checkoutPay = document.getElementById("checkoutPay");
    const checkoutName = document.getElementById("checkoutName");
    const checkoutEmail = document.getElementById("checkoutEmail");
    const checkoutCard = document.getElementById("checkoutCard");
    const checkoutMonth = document.getElementById("checkoutMonth");
    const checkoutYear = document.getElementById("checkoutYear");
    const checkoutCvv = document.getElementById("checkoutCvv");
    const checkoutAddress = document.getElementById("checkoutAddress");

    // Cancel button handler - DISABLED (handled in setupCart now)
    /*
    if (checkoutCancel) {
        checkoutCancel.addEventListener("click", function(e) {
            e.preventDefault();
            e.stopPropagation();
            if (checkoutModal) {
                checkoutModal.classList.remove("show");
            }
        });
    }
    */

    // Pay button handler - DISABLED (working version is in setupCart now)
    // All the old complex validation code has been removed
    // The simple working version is now in the setupCart() function below

    // Format card number input
    if (checkoutCard) {
        checkoutCard.addEventListener("input", function(e) {
            e.target.classList.remove("error");
            let value = e.target.value.replace(/\s+/g, "");
            let formatted = value.match(/.{1,4}/g)?.join(" ") || value;
            if (formatted.length <= 19) {
                e.target.value = formatted;
            }
        });
    }

    // Remove error class on change for dropdowns
    if (checkoutMonth) {
        checkoutMonth.addEventListener("change", function(e) {
            e.target.classList.remove("error");
        });
    }
    
    if (checkoutYear) {
        checkoutYear.addEventListener("change", function(e) {
            e.target.classList.remove("error");
        });
    }

    // Remove error class on input for all fields
    [checkoutName, checkoutEmail, checkoutCvv, checkoutAddress].forEach(el => {
        if (el) {
            el.addEventListener("input", function(e) {
                e.target.classList.remove("error");
            });
        }
    });
}

// Initialize checkout modal when DOM is ready - DISABLED
// The working checkout handler is now in setupCart() function
// if (document.readyState === 'loading') {
//     document.addEventListener('DOMContentLoaded', initCheckoutModal);
// } else {
//     // DOM is already loaded
//     initCheckoutModal();
// }

// Event Modal Functions

// Add to wishlist from trend
function addToWishlistFromTrend(icon, title, year, image) {
    icon.classList.toggle('active');
    const isActive = icon.classList.contains('active');
    
    const currentUser = localStorage.getItem('currentUser');
    if (!currentUser) {
        showToast('Please login to add to wishlist');
        icon.classList.remove('active');
        return;
    }
    
    let wishlist = JSON.parse(localStorage.getItem('wishlist_' + currentUser) || '[]');
    
    if (isActive) {
        // Add to wishlist
        wishlist.push({
            title: title,
            year: year,
            image: image,
            img: image
        });
        showToast(title + ' added to wishlist');
    } else {
        // Remove from wishlist
        wishlist = wishlist.filter(item => item.title !== title);
        showToast(title + ' removed from wishlist');
    }
    
    // Save to both localStorage keys for compatibility
    localStorage.setItem('wishlist_' + currentUser, JSON.stringify(wishlist));
    localStorage.setItem('wishlistItems', JSON.stringify(wishlist));
}

// Newsletter form handler
function handleNewsletterSubmit(event) {
    event.preventDefault();
    const emailInput = event.target.querySelector('.newsletter-input');
    const email = emailInput.value.trim();
    
    if (email) {
        showToast('Thank you for subscribing! Check your inbox for confirmation.', false, true);
        emailInput.value = '';
    } else {
        showToast('Please enter a valid email address', true);
    }
}

// Stats Counter Animation
function animateStats() {
    const statNumbers = document.querySelectorAll('.stat-number');
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const target = parseFloat(entry.target.getAttribute('data-target'));
                const duration = 2000;
                const increment = target / (duration / 16);
                let current = 0;
                
                const updateCounter = () => {
                    current += increment;
                    if (current < target) {
                        if (target % 1 === 0) {
                            entry.target.textContent = Math.floor(current);
                        } else {
                            entry.target.textContent = current.toFixed(1);
                        }
                        requestAnimationFrame(updateCounter);
                    } else {
                        if (target % 1 === 0) {
                            entry.target.textContent = Math.floor(target);
                        } else {
                            entry.target.textContent = target.toFixed(1);
                        }
                    }
                };
                
                updateCounter();
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.5 });
    
    statNumbers.forEach(stat => observer.observe(stat));
}

// Initialize stats animation when DOM is ready
document.addEventListener('DOMContentLoaded', animateStats);
</script>

<!-- Event Modal -->

<!-- Checkout Modal with Animated Card -->
<div id="checkoutModal" class="checkout-modal">
  <div class="checkout-dialog">
    <div class="checkout-header">
      <h3>ðŸ’³ Checkout</h3>
    </div>
    <div class="checkout-body">
      <!-- Animated Credit Card -->
      <div class="card-wrapper">
        <div class="card-item" id="creditCard">
          <!-- Front of Card -->
          <div class="card-side front">
            <div class="card-cover"></div>
            <div class="card-focus" id="cardFocus"></div>
            <div class="card-content">
              <div class="card-top">
                <div class="card-chip"></div>
                <div class="card-type">
                  <img id="cardTypeImg" src="" alt="" class="card-type-img" style="display: none;">
                </div>
              </div>
              <div class="card-number" id="cardNumberDisplay">
                <span class="card-number-item">####</span>
                <span class="card-number-item">####</span>
                <span class="card-number-item">####</span>
                <span class="card-number-item">####</span>
              </div>
              <div class="card-info">
                <div class="card-holder">
                  <div class="card-holder-label">Card Holder</div>
                  <div class="card-holder-name" id="cardHolderDisplay">Full Name</div>
                </div>
                <div class="card-date">
                  <div class="card-date-label">Expires</div>
                  <div class="card-date-value" id="cardDateDisplay">MM/YY</div>
                </div>
              </div>
            </div>
          </div>
          <!-- Back of Card -->
          <div class="card-side back">
            <div class="card-cover"></div>
            <div class="card-band"></div>
            <div class="card-cvv">
              <div class="card-cvv-label">CVV</div>
              <div class="card-cvv-band" id="cardCvvDisplay">***</div>
              <div class="card-type">
                <img id="cardTypeImgBack" src="" alt="" class="card-type-img" style="display: none;">
              </div>
            </div>
          </div>
        </div>
      </div>

      <p style="font-size: 0.9rem; color: rgba(255, 255, 255, 0.7); margin-bottom: 20px; margin-top: 20px;">Enter your details to complete the purchase. (Demo only â€” no real payment.)</p>

      <div style="margin-bottom: 15px;">
        <div class="checkout-label">Card Number</div>
        <input id="checkoutCard" type="text" class="checkout-input" placeholder="1234 5678 9012 3456" maxlength="19" autocomplete="off" />
      </div>

      <div style="margin-bottom: 15px;">
        <div class="checkout-label">Card Holder</div>
        <input id="checkoutName" type="text" class="checkout-input" placeholder="John Doe" autocomplete="off" />
      </div>

      <div class="checkout-row" style="margin-bottom: 15px;">
        <div style="flex:1; margin-right: 10px;">
          <div class="checkout-label">Expiration Date</div>
          <div style="display: flex; gap: 10px;">
            <select id="checkoutMonth" class="checkout-input" style="flex: 1;">
              <option value="">Month</option>
            </select>
            <select id="checkoutYear" class="checkout-input" style="flex: 1;">
              <option value="">Year</option>
            </select>
          </div>
        </div>
        <div style="flex:1;">
          <div class="checkout-label">CVV</div>
          <input id="checkoutCvv" type="text" class="checkout-input" placeholder="123" maxlength="4" autocomplete="off" />
        </div>
      </div>

      <div style="margin-bottom: 15px;">
        <div class="checkout-label">Email</div>
        <input id="checkoutEmail" type="email" class="checkout-input" placeholder="you@example.com" />
      </div>

      <div style="margin-bottom: 20px;">
        <div class="checkout-label">Billing Address</div>
        <input id="checkoutAddress" type="text" class="checkout-input" placeholder="Street, City, Country" />
      </div>
    </div>
    <div class="checkout-footer">
      <div class="checkout-actions">
        <button type="button" id="checkoutCancel" class="checkout-cancel">Cancel</button>
        <button type="button" id="checkoutPay" class="checkout-pay">Pay Now</button>
      </div>
    </div>
  </div>
</div>

<!-- Ticket Selection Modal -->
<div id="ticketModal" class="cartModal">
  <div class="cartModalDialog">
    <div class="cartModalHeader">
      <h2>ðŸŽŸï¸ Select Your Ticket</h2>
      <div class="cartModalClose" id="ticketModalClose">Ã—</div>
    </div>
    <div class="cartModalBody" style="padding: 25px;">
      <div id="ticketMovieInfo" style="margin-bottom: 25px; padding: 15px; background: rgba(255, 42, 109, 0.1); border-radius: 10px; border: 1px solid rgba(255, 42, 109, 0.3);">
        <h3 id="ticketMovieTitle" style="color: var(--pink); margin-bottom: 5px;">Movie Title</h3>
        <p id="ticketMovieYear" style="color: rgba(255, 255, 255, 0.6); font-size: 0.9rem;">Year</p>
      </div>

      <!-- Date Selection -->
      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; color: var(--pink); font-weight: 600;">
          <i class="fas fa-calendar-alt"></i> Select Date
        </label>
        <input type="date" id="ticketDate" class="checkout-input" style="width: 100%;" />
      </div>

      <!-- Screen Selection -->
      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; color: var(--pink); font-weight: 600;">
          <i class="fas fa-tv"></i> Select Screen
        </label>
        <select id="ticketScreen" class="checkout-input" style="width: 100%;">
          <option value="">Choose a screen...</option>
          <option value="IMAX 1">IMAX 1 - Premium Experience</option>
          <option value="IMAX 2">IMAX 2 - Premium Experience</option>
          <option value="Screen 1">Screen 1 - Standard</option>
          <option value="Screen 2">Screen 2 - Standard</option>
          <option value="Screen 3">Screen 3 - Standard</option>
          <option value="4DX">4DX - Motion Seats</option>
          <option value="Dolby Atmos">Dolby Atmos - Premium Sound</option>
        </select>
      </div>

      <!-- Time Selection -->
      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; color: var(--pink); font-weight: 600;">
          <i class="fas fa-clock"></i> Select Time
        </label>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 10px;">
          <button class="time-slot" data-time="10:00 AM">10:00 AM</button>
          <button class="time-slot" data-time="1:00 PM">1:00 PM</button>
          <button class="time-slot" data-time="4:00 PM">4:00 PM</button>
          <button class="time-slot" data-time="7:00 PM">7:00 PM</button>
          <button class="time-slot" data-time="10:00 PM">10:00 PM</button>
        </div>
      </div>

      <!-- Seat Selection -->
      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; color: var(--pink); font-weight: 600;">
          <i class="fas fa-couch"></i> Select Seat
        </label>
        <div id="seatMap" style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 8px; max-width: 400px; margin: 0 auto;">
          <!-- Seats will be generated dynamically -->
        </div>
        <div style="text-align: center; margin-top: 15px; padding: 10px; background: rgba(255, 255, 255, 0.05); border-radius: 8px;">
          <span style="color: rgba(255, 255, 255, 0.7);">Selected Seat: </span>
          <span id="selectedSeatDisplay" style="color: var(--pink); font-weight: 600;">None</span>
        </div>
      </div>
    </div>
    <div class="cartModalFooter">
      <button id="ticketConfirmBtn" class="checkoutBtn" style="width: 100%; padding: 15px; font-size: 1.1rem;">
        <i class="fas fa-shopping-cart"></i> Add to Cart
      </button>
    </div>
  </div>
</div>

<!-- Cart Modal -->
<div id="cartModal" class="cartModal">
  <div class="cartModalDialog">
    <div class="cartModalHeader">
      <h2>ðŸ›’ Shopping Cart</h2>
      <div id="cartModalClose" class="cartModalClose">Ã—</div>
  </div>
    <div class="cartModalBody">
      <div id="cartItemsList" class="cartItemsList">
        <div class="cartEmpty">
          <div class="cartEmptyIcon">ðŸ›’</div>
          <p>Your cart is empty.</p>
  </div>
      </div>
    </div>
    <div class="cartModalFooter">
      <span id="cartSummary" class="cartSummary">0 items</span>
    <button id="checkoutBtn" class="checkout-btn" disabled>Checkout</button>
    </div>
  </div>
</div>

<!-- Add-to-cart Toast -->
<div id="cartToast" class="cart-toast">
  <div class="cart-toast-dot"></div>
  <span id="cartToastText">Item added to cart</span>
</div>

<script>
// ===== Shared toast helper =====
function showToast(message, isError = false, isSuccess = false) {
  const toast = document.getElementById("cartToast");
  const textEl = document.getElementById("cartToastText");
  if (!toast || !textEl) return;

  textEl.textContent = message;

  toast.classList.remove("error", "success");
  if (isError) {
    toast.classList.add("error");
  }
  if (isSuccess) {
    toast.classList.add("success");
  }

  toast.classList.add("show");
  setTimeout(() => {
    toast.classList.remove("show");
  }, 1800);
}

// ===== Add-to-Cart logic =====
let cartCount = 0;
let cartItems = []; // each item: { title, img }
let wishlistItems = []; // each item: { title, img }

// Load cart from localStorage and filter out tvicon images
function loadCartFromStorage() {
  const stored = localStorage.getItem('cartItems');
  if (stored) {
    try {
      const loaded = JSON.parse(stored);
      if (Array.isArray(loaded)) {
        // Filter and clean up images - remove tvicon
        cartItems = loaded.map(item => {
          let imgSrc = item.img || item.image || item.src || "";
          
          // Clean up image path
          if (imgSrc && imgSrc.includes("/")) {
            const filename = imgSrc.split("/").pop().split("\\").pop();
            if (filename && !filename.toLowerCase().includes("tvicon") && 
                (filename.toLowerCase().includes(".jpg") || 
                 filename.toLowerCase().includes(".png") || 
                 filename.toLowerCase().includes(".jpeg") ||
                 filename.toLowerCase().includes(".webp"))) {
              imgSrc = filename;
            } else {
              imgSrc = "images/dune.jpg";
            }
          }
          
          // Final check - if still tvicon or empty, use default
          if (!imgSrc || imgSrc.toLowerCase().includes("tvicon")) {
            imgSrc = "images/dune.jpg";
          }
          
          return { ...item, img: imgSrc, price: item.price || 9.99 };
        });
        cartCount = cartItems.length;
        updateCartDisplay();
      }
    } catch(e) {
      console.error('Error loading cart from localStorage:', e);
    }
  }
  
  // Also check user-specific cart
  const currentUser = localStorage.getItem('currentUser');
  if (currentUser && cartItems.length === 0) {
    const userCart = localStorage.getItem('cart_' + currentUser);
    if (userCart) {
      try {
        const loaded = JSON.parse(userCart);
        if (Array.isArray(loaded) && loaded.length > 0) {
          cartItems = loaded.map(item => {
            let imgSrc = item.img || item.image || item.src || "";
            
            if (imgSrc && imgSrc.includes("/")) {
              const filename = imgSrc.split("/").pop().split("\\").pop();
              if (filename && !filename.toLowerCase().includes("tvicon") && 
                  (filename.toLowerCase().includes(".jpg") || 
                   filename.toLowerCase().includes(".png") || 
                   filename.toLowerCase().includes(".jpeg") ||
                   filename.toLowerCase().includes(".webp"))) {
                imgSrc = filename;
              } else {
                imgSrc = "images/dune.jpg";
              }
            }
            
            if (!imgSrc || imgSrc.toLowerCase().includes("tvicon")) {
              imgSrc = "images/dune.jpg";
            }
            
            return { ...item, img: imgSrc, price: item.price || 9.99 };
          });
          cartCount = cartItems.length;
          updateCartDisplay();
        }
      } catch(e) {
        console.error('Error loading user cart from localStorage:', e);
      }
    }
  }
}

// Load wishlist from localStorage
function loadWishlistFromStorage() {
  const stored = localStorage.getItem('wishlistItems');
  if (stored) {
    try {
      wishlistItems = JSON.parse(stored);
    } catch (e) {
      wishlistItems = [];
    }
  }
}

// Load cart and wishlist on page load
loadCartFromStorage();
loadWishlistFromStorage();

function updateCartDisplay() {
  const cartCountEl = document.getElementById("cartCount");
  if (cartCountEl) {
    cartCountEl.textContent = cartCount;
  }
}

// Get movie image path from title (fallback helper)
function getMovieImagePath(title) {
  const imageMap = {
    'Batman Beyond': 'images/batman.png',
    'Bleach: Blood War': 'images/ichigo.jpg',
    'Dandadan: Season 2': 'images/silk.jpg',
    'Jujutsu Kaisen': 'images/kai.jpg',
    'Spiderverse': 'images/spidey.jpg',
    'One Piece': 'images/piece.jpg',
    'Demon Slayer': 'images/tanjiro.jpg',
    'Interstellar': 'images/hole.jpg',
    'Suzume no tojimari': 'images/5815029.jpg',
    'Squidgame': 'images/Squid Game.jpg',
    'Cyberpunk: Edgerunner': 'images/cyberpunk.jpg',
    'Suzume': 'images/Suzume (2022) - Makoto Shinkai.jpg',
    'Inception': 'images/Inception - for @filmthusiast.jpg',
    'Dandadan: Evil Eye': 'images/dandadan.jpg',
    'Apothecary Diaries': 'images/_The Apothecary Diaries_.jpg',
    'Loki Series': 'images/loki.jpg',
    'Mermaid': 'images/The Little Mermaid ( 11.jpg',
    '3 Idiots': 'images/3 Idiots (2009)_.jpg',
    'Dhamaal': 'images/TOTAL DHAMAAL.jpg',
    'Moana': 'images/New Movie Posters for Moana.jpg',
    'Luffy': 'images/Luffy.jpg',
    'Jujutsu kaisen': 'images/jujutsu.jpg',
    'Solo leveling': 'images/Solo Leveling Poster.jpg',
    'Naruto': 'images/naruto.jpg',
    'Bleach': 'images/Bleach Resonance Of Souls.jpg',
    'Dandadan S1': 'images/ken.jpg',
    'Spiderverse Beyond': 'images/spiderverse.png',
    'Dune': 'images/dune.jpg',
    'Oppenheimer': 'images/oppenheimer.png',
    'The Dark Knight': 'images/batman.jpg',
    'Squid Game': 'images/squid.jpg',
    'Money Heist': 'images/moneyheist.jpg',
    'Batman': 'images/batman.jpg'
  };
  return imageMap[title] || '';
}

function renderCartModal() {
  const listEl = document.getElementById("cartItemsList");
  if (!listEl) return;

  listEl.innerHTML = "";

  if (cartItems.length === 0) {
    const empty = document.createElement("div");
    empty.className = "cartEmpty";
    empty.innerHTML = '<div class="cartEmptyIcon">ðŸ›’</div><p>Your cart is empty.</p>';
    listEl.appendChild(empty);

    const summaryEl = document.getElementById("cartSummary");
    const checkoutBtn = document.getElementById("checkoutBtn");
    if (summaryEl) summaryEl.textContent = "0 items";
    if (checkoutBtn) checkoutBtn.disabled = true;
    return;
  }

  cartItems.forEach((itemData, index) => {
    const item = document.createElement("div");
    item.className = "cartItem";

    const img = document.createElement("img");
    // Use cardImage first, then img, then image, then src
    let imgSrc = itemData.cardImage || itemData.img || itemData.image || itemData.src || "";
    
    // Normalize image path
    if (imgSrc) {
      // If it's already a full path with images/, use as is
      if (imgSrc.includes("images/")) {
        // Already has images/ prefix, check if valid
        if (imgSrc.toLowerCase().includes("tvicon")) {
          imgSrc = "";
        }
      } else if (imgSrc.includes("/")) {
        // Has path but no images/ - extract filename
        const filename = imgSrc.split("/").pop().split("\\").pop();
        if (filename && !filename.toLowerCase().includes("tvicon") && 
            (filename.toLowerCase().includes(".jpg") || 
             filename.toLowerCase().includes(".png") || 
             filename.toLowerCase().includes(".jpeg") ||
             filename.toLowerCase().includes(".webp"))) {
          imgSrc = "images/" + filename;
        } else {
          imgSrc = ""; // Reset if invalid
        }
      } else {
        // Just filename, add images/ prefix
        if (!imgSrc.toLowerCase().includes("tvicon") && 
            (imgSrc.toLowerCase().includes(".jpg") || 
             imgSrc.toLowerCase().includes(".png") || 
             imgSrc.toLowerCase().includes(".jpeg") ||
             imgSrc.toLowerCase().includes(".webp"))) {
          imgSrc = "images/" + imgSrc;
        } else {
          imgSrc = ""; // Reset if invalid
        }
      }
    }
    
    // If still no valid image, try to get from title using getMovieImagePath if available
    if (!imgSrc || imgSrc.toLowerCase().includes("tvicon")) {
      if (typeof getMovieImagePath === 'function') {
        imgSrc = getMovieImagePath(itemData.title);
      }
      // If still no image, use default
      if (!imgSrc || imgSrc.toLowerCase().includes("tvicon")) {
        imgSrc = "images/dune.jpg";
      }
    }
    
    img.src = imgSrc;
    img.alt = itemData.title;
    img.className = "cartItemImage";
    
    // Add error handler to fallback to another image if this one fails
    img.onerror = function() {
      if (this.src !== "images/dune.jpg" && this.src !== "images/batman.png") {
        this.src = "images/dune.jpg";
      } else if (this.src === "images/dune.jpg") {
        this.src = "images/batman.png";
      } else {
        this.style.display = "none";
      }
    };

    const content = document.createElement("div");
    content.className = "cartItemContent";

    const titleEl = document.createElement("div");
    titleEl.className = "cartItemTitle";
    titleEl.textContent = itemData.title;

    const subtitleEl = document.createElement("div");
    subtitleEl.className = "cartItemSubtitle";
    subtitleEl.textContent = "Selected show";

    content.appendChild(titleEl);
    content.appendChild(subtitleEl);

    const removeBtn = document.createElement("button");
    removeBtn.className = "cartItemRemove";
    removeBtn.innerHTML = "Ã—";
    removeBtn.title = "Remove from cart";
    removeBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      cartItems.splice(index, 1);
      cartCount = cartItems.length;
      
      // Save to localStorage so other pages (ubaid.html) can sync
      localStorage.setItem('cartItems', JSON.stringify(cartItems));
      const currentUser = localStorage.getItem('currentUser');
      if (currentUser) {
        localStorage.setItem('cart_' + currentUser, JSON.stringify(cartItems));
      }
      
      updateCartDisplay();
      renderCartModal();
      showToast("Item removed from cart");
    });

    item.appendChild(img);
    item.appendChild(content);
    item.appendChild(removeBtn);

    listEl.appendChild(item);
  });

  const summaryEl = document.getElementById("cartSummary");
  const checkoutBtn = document.getElementById("checkoutBtn");
  if (summaryEl) {
    const count = cartItems.length;
    summaryEl.textContent = `${count} item${count === 1 ? "" : "s"}`;
  }
  if (checkoutBtn) checkoutBtn.disabled = cartItems.length === 0;
}

// Check if user is logged in
function isLoggedIn() {
  return localStorage.getItem('isLoggedIn') === 'true' && localStorage.getItem('currentUser');
}

// Show login required popup
function showLoginPopup() {
  // Create popup if it doesn't exist
  let popup = document.getElementById('loginPopup');
  if (!popup) {
    popup = document.createElement('div');
    popup.id = 'loginPopup';
    popup.className = 'cartModal';
    
    const popupContent = document.createElement('div');
    popupContent.className = 'cartModalDialog';
    
    popupContent.innerHTML = `
      <div class="cartModalHeader">
        <h2>Login Required</h2>
        <div class="cartModalClose">Ã—</div>
      </div>
      <div class="cartModalBody" style="padding: 30px; text-align: center;">
        <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 30px; line-height: 1.6; font-size: 1.1rem;">
          You need to have an account to perform this action. Go to sign in page to register or login.
        </p>
        <div style="display: flex; gap: 15px; justify-content: center;">
          <button id="loginBtn" class="add-cart-btn" style="background: linear-gradient(135deg, #ff2a6d, #ff5a8d); border: none; padding: 12px 25px; font-size: 1rem;">
            <i class="fas fa-sign-in-alt"></i> Login Now
          </button>
          <button id="cancelBtn" class="add-cart-btn" style="background: transparent; border: 2px solid rgba(255, 255, 255, 0.3); padding: 12px 25px; font-size: 1rem;">
            Cancel
          </button>
        </div>
      </div>
    `;
    
    popup.appendChild(popupContent);
    document.body.appendChild(popup);
    
    // Add event listeners
    popup.querySelector('#loginBtn').addEventListener('click', function() {
      window.location.href = 'ubaid.html';
    });
    
    popup.querySelector('#cancelBtn').addEventListener('click', function() {
      popup.classList.remove('show');
    });
    
    // Add hover effects to buttons
    const loginBtn = popup.querySelector('#loginBtn');
    const cancelBtn = popup.querySelector('#cancelBtn');
    
    loginBtn.addEventListener('mouseenter', function() {
      this.style.transform = 'translateY(-3px) scale(1.05)';
      this.style.boxShadow = '0 10px 30px rgba(255, 42, 109, 0.5)';
      this.style.background = 'linear-gradient(135deg, #ff2a6d, #ff5a8d)';
    });
    
    loginBtn.addEventListener('mouseleave', function() {
      this.style.transform = 'translateY(0) scale(1)';
      this.style.boxShadow = 'none';
      this.style.background = 'linear-gradient(135deg, #ff2a6d, #ff5a8d)';
    });
    
    cancelBtn.addEventListener('mouseenter', function() {
      this.style.transform = 'translateY(-3px) scale(1.05)';
      this.style.boxShadow = '0 10px 30px rgba(255, 255, 255, 0.2)';
      this.style.borderColor = 'rgba(255, 255, 255, 0.5)';
    });
    
    cancelBtn.addEventListener('mouseleave', function() {
      this.style.transform = 'translateY(0) scale(1)';
      this.style.boxShadow = 'none';
      this.style.borderColor = 'rgba(255, 255, 255, 0.3)';
    });
    
    // Close on backdrop click or close button
    popup.addEventListener('click', function(e) {
      if (e.target === popup || e.target.classList.contains('cartModalClose')) {
        popup.classList.remove('show');
      }
    });
  }
  
  // Show popup with animation
  popup.classList.add('show');
}

// Ticket Modal Variables
let currentTicketSelection = {
  title: '',
  img: '',
  date: '',
  screen: '',
  time: '',
  seat: ''
};

function setupCart() {
  const buttons = document.querySelectorAll(".buy-btn, .watch-btn");

  buttons.forEach((btn) => {
    btn.addEventListener("click", (e) => {
      e.stopPropagation();
      
      // Check if user is logged in
      if (!isLoggedIn()) {
        showLoginPopup();
        return;
      }
      
      const parent =
        btn.closest(".movie") ||
        btn.closest(".card") ||
        btn.closest(".cardbelow") ||
        btn.closest(".movie-card");

      // Try multiple selectors to find the title, prioritizing movie-info h4 for movie cards
      let titleEl = null;
      if (parent) {
        // For movie cards, the title is in .movie-info h4
        titleEl = parent.querySelector(".movie-info h4") || 
                  parent.querySelector(".movie-hover h4") ||
                  parent.querySelector(".movie-title") || 
                  parent.querySelector("h3") || 
                  parent.querySelector(".title") ||
                  parent.querySelector("h4");
      }
      const title = titleEl ? titleEl.textContent.trim() : "Untitled Movie";

      const imgEl = parent ? parent.querySelector("img") : null;
      let imgSrc = "";
      
      if (imgEl) {
        // Get the image source - prefer src attribute over currentSrc
        imgSrc = imgEl.getAttribute("src") || imgEl.src || "";
        
        // Extract just the filename from the path
        if (imgSrc) {
          // Remove any full URL paths and get just the filename
          const filename = imgSrc.split("/").pop().split("\\").pop();
          
          // Filter out tvicon and use the actual image
          if (filename && !filename.toLowerCase().includes("tvicon") && 
              (filename.toLowerCase().includes(".jpg") || 
               filename.toLowerCase().includes(".png") || 
               filename.toLowerCase().includes(".jpeg") ||
               filename.toLowerCase().includes(".webp"))) {
            imgSrc = filename;
          } else {
            // If it's tvicon or invalid, try to find another image in the parent
            const allImgs = parent ? parent.querySelectorAll("img") : [];
            for (let img of allImgs) {
              const altSrc = img.getAttribute("src") || img.src || "";
              const altFilename = altSrc.split("/").pop().split("\\").pop();
              if (altFilename && !altFilename.toLowerCase().includes("tvicon") &&
                  (altFilename.toLowerCase().includes(".jpg") || 
                   altFilename.toLowerCase().includes(".png") || 
                   altFilename.toLowerCase().includes(".jpeg") ||
                   altFilename.toLowerCase().includes(".webp"))) {
                imgSrc = altFilename;
                break;
              }
            }
            // If still no good image, use a default
            if (!imgSrc || imgSrc.toLowerCase().includes("tvicon")) {
              imgSrc = "images/dune.jpg"; // Default fallback
            }
          }
        } else {
          imgSrc = "images/dune.jpg"; // Default fallback
        }
      } else {
        imgSrc = "images/dune.jpg"; // Default fallback
      }

      // Normalize image path - ensure it has images/ prefix
      if (imgSrc && !imgSrc.includes("images/") && !imgSrc.startsWith("http") && !imgSrc.startsWith("//")) {
        if (imgSrc.includes("/")) {
          const filename = imgSrc.split("/").pop().split("\\").pop();
          if (filename && !filename.toLowerCase().includes("tvicon")) {
            imgSrc = "images/" + filename;
          } else {
            imgSrc = "images/dune.jpg";
          }
        } else {
          imgSrc = "images/" + imgSrc;
        }
      }
      
      // Store movie info and open ticket selection modal
      currentTicketSelection.title = title;
      currentTicketSelection.img = imgSrc;
      
      // Open ticket modal
      openTicketModal(title, imgSrc);
    });
  });

  const cartIcon = document.getElementById("cartIcon");
  const cartModal = document.getElementById("cartModal");
  const cartModalClose = document.getElementById("cartModalClose");
  const checkoutBtn = document.getElementById("checkoutBtn");
  const checkoutModal = document.getElementById("checkoutModal");
  const checkoutCancel = document.getElementById("checkoutCancel");
  const checkoutPay = document.getElementById("checkoutPay");

  if (cartIcon && cartModal) {
    cartIcon.addEventListener("click", (e) => {
      e.preventDefault();
      cartModal.classList.add("show");
      renderCartModal();
    });
  }

  if (cartModalClose && cartModal) {
    cartModalClose.addEventListener("click", () => {
      cartModal.classList.remove("show");
    });
  }

  // Close cart modal when clicking outside
  if (cartModal) {
    cartModal.addEventListener("click", (e) => {
      if (e.target === cartModal) {
        cartModal.classList.remove("show");
      }
    });
  }

  // Checkout modal handlers
  if (checkoutBtn && checkoutModal) {
    checkoutBtn.addEventListener("click", () => {
      if (cartItems.length === 0) return;
      checkoutModal.classList.add("show");
    });
  }

  if (checkoutCancel && checkoutModal) {
    checkoutCancel.addEventListener("click", () => {
      checkoutModal.classList.remove("show");
    });
  }

  // Simple Pay Now handler (working version from copymovie.html with booking functionality)
  if (checkoutPay && checkoutModal) {
    checkoutPay.addEventListener("click", () => {
      const nameInput = document.getElementById("checkoutName");
      const emailInput = document.getElementById("checkoutEmail");
      const cardInput = document.getElementById("checkoutCard");
      const monthInput = document.getElementById("checkoutMonth");
      const yearInput = document.getElementById("checkoutYear");
      const cvvInput = document.getElementById("checkoutCvv");
      const addressInput = document.getElementById("checkoutAddress");

      const name = nameInput ? nameInput.value.trim() : "";
      const email = emailInput ? emailInput.value.trim() : "";
      const card = cardInput ? cardInput.value.replace(/\s+/g, "").replace(/\D/g, "") : "";
      const month = monthInput ? monthInput.value : "";
      const year = yearInput ? yearInput.value : "";
      const cvv = cvvInput ? cvvInput.value.trim() : "";
      const address = addressInput ? addressInput.value.trim() : "";

      if (!name || !email || !card || !month || !year || !cvv || !address) {
        showToast("Please fill in all fields before paying.", true);
        return;
      }

      const emailOk = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      if (!emailOk) {
        showToast("Please enter a valid email address.", true);
        return;
      }

      if (card.length < 13 || card.length > 19) {
        showToast("Please enter a valid card number.", true);
        return;
      }

      // Save bookings before clearing cart
      const currentUser = localStorage.getItem('currentUser');
      if (currentUser && cartItems.length > 0) {
        let bookedItems = [];
        
        // Load existing bookings
        const storedBookings = localStorage.getItem('bookings_' + currentUser);
        if (storedBookings) {
          try {
            bookedItems = JSON.parse(storedBookings);
          } catch(e) {
            console.error('Error parsing bookings:', e);
          }
        }
        
        // Add current cart items to bookings
        const timestamp = new Date().toISOString();
        cartItems.forEach(item => {
          const showDate = new Date();
          showDate.setDate(showDate.getDate() + 7); // 7 days from now
          
          const booking = {
            ...item,
            bookingId: 'BK' + Date.now() + Math.floor(Math.random() * 1000),
            bookingDate: timestamp,
            showDate: showDate.toISOString(),
            status: 'Confirmed',
            totalAmount: item.price || 9.99,
            ticketCount: 1,
            image: item.img || item.cardImage || 'images/dune.jpg'
          };
          bookedItems.push(booking);
        });
        
        // Save bookings to localStorage
        localStorage.setItem('bookings_' + currentUser, JSON.stringify(bookedItems));
        console.log('Bookings saved:', bookedItems);
      }

      // Clear cart completely
      cartItems = [];
      cartCount = 0;
      updateCartDisplay();
      renderCartModal();
      
      // Clear all cart data from localStorage
      localStorage.setItem('cartItems', JSON.stringify([]));
      if (currentUser) {
        localStorage.setItem('cart_' + currentUser, JSON.stringify([]));
      }
      localStorage.removeItem('shoppingCart');
      localStorage.removeItem('userCart');
      
      // Close modals
      checkoutModal.classList.remove("show");
      if (cartModal) {
        cartModal.classList.remove("show");
      }
      
      showToast("âœ… Payment successful! Your tickets have been booked.");
    });
  }

  // Animated Credit Card Functionality
  function initAnimatedCard() {
    const cardItem = document.getElementById('creditCard');
    const cardNumberInput = document.getElementById('checkoutCard');
    const cardNameInput = document.getElementById('checkoutName');
    const cardMonthSelect = document.getElementById('checkoutMonth');
    const cardYearSelect = document.getElementById('checkoutYear');
    const cardCvvInput = document.getElementById('checkoutCvv');
    const cardFocus = document.getElementById('cardFocus');
    const cardNumberDisplay = document.getElementById('cardNumberDisplay');
    const cardHolderDisplay = document.getElementById('cardHolderDisplay');
    const cardDateDisplay = document.getElementById('cardDateDisplay');
    const cardCvvDisplay = document.getElementById('cardCvvDisplay');
    const cardTypeImg = document.getElementById('cardTypeImg');
    const cardTypeImgBack = document.getElementById('cardTypeImgBack');

    // Card type detection
    function getCardType(number) {
      const num = number.replace(/\s/g, '');
      if (/^4/.test(num)) return 'visa';
      if (/^(34|37)/.test(num)) return 'amex';
      if (/^5[1-5]/.test(num)) return 'mastercard';
      if (/^6011/.test(num)) return 'discover';
      if (/^9792/.test(num)) return 'troy';
      return 'visa';
    }

    // Format card number with spaces
    function formatCardNumber(value) {
      const num = value.replace(/\s/g, '');
      const cardType = getCardType(num);
      const isAmex = cardType === 'amex';
      const groups = isAmex ? [4, 6, 5] : [4, 4, 4, 4];
      let formatted = '';
      let index = 0;
      
      for (let i = 0; i < groups.length && index < num.length; i++) {
        formatted += num.substring(index, index + groups[i]);
        index += groups[i];
        if (index < num.length) formatted += ' ';
      }
      
      return formatted;
    }

    // Update card number display
    function updateCardNumber(value) {
      const formatted = formatCardNumber(value);
      const num = value.replace(/\s/g, '');
      const cardType = getCardType(num);
      const isAmex = cardType === 'amex';
      const mask = isAmex ? '#### ###### #####' : '#### #### #### ####';
      const display = mask.split('').map((char, index) => {
        if (char === ' ') return ' ';
        if (index < num.length) {
          if (index > 4 && index < (isAmex ? 14 : 15)) {
            return '*';
          }
          return num[index];
        }
        return '#';
      }).join('');

      cardNumberDisplay.innerHTML = display.split('').map(char => {
        if (char === ' ') return ' ';
        return `<span class="card-number-item ${char === '#' ? '' : 'active'}">${char}</span>`;
      }).join('');
    }

    // Update card type image
    function updateCardType(number) {
      const cardType = getCardType(number);
      const typeMap = {
        visa: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCA0MCAyNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjI1IiByeD0iMyIgZmlsbD0iIzAwMCIvPgo8cGF0aCBkPSJNMTAgMTJIMzBMMjggMTdIMTJMMTAgMTJaIiBmaWxsPSIjMDAzOTdGIi8+Cjwvc3ZnPg==',
        mastercard: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCA0MCAyNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjI1IiByeD0iMyIgZmlsbD0iIzAwMCIvPgo8Y2lyY2xlIGN4PSIxNSIgY3k9IjEyLjUiIHI9IjciIGZpbGw9IiNFRjAwMDAiLz4KPGNpcmNsZSBjeD0iMjUiIGN5PSIxMi41IiByPSI3IiBmaWxsPSIjRkY5RTIwIi8+Cjwvc3ZnPg==',
        amex: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCA0MCAyNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjI1IiByeD0iMyIgZmlsbD0iIzAwN2NkNiIvPgo8L3N2Zz4=',
        discover: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCA0MCAyNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjI1IiByeD0iMyIgZmlsbD0iI0ZGNkEwMCIvPgo8L3N2Zz4='
      };
      
      if (typeMap[cardType] && cardTypeImg && cardTypeImgBack) {
        cardTypeImg.src = typeMap[cardType];
        cardTypeImg.style.display = 'block';
        cardTypeImgBack.src = typeMap[cardType];
        cardTypeImgBack.style.display = 'block';
      }
    }

    // Populate month and year dropdowns
    function populateDateDropdowns() {
      const currentYear = new Date().getFullYear();
      const currentMonth = new Date().getMonth() + 1;
      
      // Populate months
      if (cardMonthSelect) {
        for (let i = 1; i <= 12; i++) {
          const option = document.createElement('option');
          option.value = i < 10 ? '0' + i : i;
          option.textContent = i < 10 ? '0' + i : i;
          cardMonthSelect.appendChild(option);
        }
      }
      
      // Populate years (next 12 years)
      if (cardYearSelect) {
        for (let i = 0; i < 12; i++) {
          const option = document.createElement('option');
          const year = currentYear + i;
          option.value = year;
          option.textContent = year;
          cardYearSelect.appendChild(option);
        }
      }
    }

    // Card number input handler
    if (cardNumberInput) {
      cardNumberInput.addEventListener('input', (e) => {
        let value = e.target.value.replace(/\D/g, '');
        const cardType = getCardType(value);
        const maxLength = cardType === 'amex' ? 15 : 16;
        value = value.substring(0, maxLength);
        const formatted = formatCardNumber(value);
        e.target.value = formatted;
        updateCardNumber(value);
        updateCardType(value);
      });

      cardNumberInput.addEventListener('focus', () => {
        if (cardFocus) {
          const cardNumberRef = cardNumberInput;
          const rect = cardNumberRef.getBoundingClientRect();
          const cardRect = cardItem.getBoundingClientRect();
          cardFocus.style.width = rect.width + 'px';
          cardFocus.style.height = rect.height + 'px';
          cardFocus.style.transform = `translateX(${rect.left - cardRect.left}px) translateY(${rect.top - cardRect.top}px)`;
          cardFocus.classList.add('active');
        }
      });

      cardNumberInput.addEventListener('blur', () => {
        setTimeout(() => {
          if (cardFocus) {
            cardFocus.classList.remove('active');
          }
        }, 300);
      });
    }

    // Card name input handler
    if (cardNameInput) {
      cardNameInput.addEventListener('input', (e) => {
        const value = e.target.value.toUpperCase() || 'Full Name';
        if (cardHolderDisplay) {
          cardHolderDisplay.textContent = value || 'Full Name';
        }
      });

      cardNameInput.addEventListener('focus', () => {
        if (cardFocus) {
          const rect = cardNameInput.getBoundingClientRect();
          const cardRect = cardItem.getBoundingClientRect();
          cardFocus.style.width = rect.width + 'px';
          cardFocus.style.height = rect.height + 'px';
          cardFocus.style.transform = `translateX(${rect.left - cardRect.left}px) translateY(${rect.top - cardRect.top}px)`;
          cardFocus.classList.add('active');
        }
      });

      cardNameInput.addEventListener('blur', () => {
        setTimeout(() => {
          if (cardFocus) {
            cardFocus.classList.remove('active');
          }
        }, 300);
      });
    }

    // Date select handlers
    if (cardMonthSelect && cardYearSelect) {
      const updateDateDisplay = () => {
        const month = cardMonthSelect.value || 'MM';
        const year = cardYearSelect.value ? String(cardYearSelect.value).slice(-2) : 'YY';
        if (cardDateDisplay) {
          cardDateDisplay.textContent = `${month}/${year}`;
        }
      };

      cardMonthSelect.addEventListener('change', updateDateDisplay);
      cardYearSelect.addEventListener('change', updateDateDisplay);

      cardMonthSelect.addEventListener('focus', () => {
        if (cardFocus) {
          const rect = cardMonthSelect.getBoundingClientRect();
          const cardRect = cardItem.getBoundingClientRect();
          cardFocus.style.width = rect.width + 'px';
          cardFocus.style.height = rect.height + 'px';
          cardFocus.style.transform = `translateX(${rect.left - cardRect.left}px) translateY(${rect.top - cardRect.top}px)`;
          cardFocus.classList.add('active');
        }
      });

      cardYearSelect.addEventListener('focus', () => {
        if (cardFocus) {
          const rect = cardYearSelect.getBoundingClientRect();
          const cardRect = cardItem.getBoundingClientRect();
          cardFocus.style.width = rect.width + 'px';
          cardFocus.style.height = rect.height + 'px';
          cardFocus.style.transform = `translateX(${rect.left - cardRect.left}px) translateY(${rect.top - cardRect.top}px)`;
          cardFocus.classList.add('active');
        }
      });

      [cardMonthSelect, cardYearSelect].forEach(el => {
        el.addEventListener('blur', () => {
          setTimeout(() => {
            if (cardFocus) {
              cardFocus.classList.remove('active');
            }
          }, 300);
        });
      });
      
      // Re-setup cart buttons for newly created movie cards
      setupCart();
    }

    // CVV input handler - flip card
    if (cardCvvInput) {
      cardCvvInput.addEventListener('focus', () => {
        if (cardItem) {
          cardItem.classList.add('flipped');
        }
      });

      cardCvvInput.addEventListener('blur', () => {
        if (cardItem) {
          cardItem.classList.remove('flipped');
        }
      });

      cardCvvInput.addEventListener('input', (e) => {
        let value = e.target.value.replace(/\D/g, '').substring(0, 4);
        e.target.value = value;
        if (cardCvvDisplay) {
          cardCvvDisplay.textContent = '*'.repeat(value.length) || '***';
        }
      });
    }

    // Initialize date dropdowns
    populateDateDropdowns();
  }

  // Initialize animated card when modal opens
  if (checkoutModal) {
    const observer = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
          if (checkoutModal.classList.contains('show')) {
            initAnimatedCard();
          }
        }
      });
    });
    observer.observe(checkoutModal, { attributes: true });
  }

  // Removed duplicate event listener - functionality is handled in initCheckoutModal
}

// Ticket Modal Functions
function openTicketModal(title, imgSrc) {
  const ticketModal = document.getElementById('ticketModal');
  const ticketMovieTitle = document.getElementById('ticketMovieTitle');
  const ticketMovieYear = document.getElementById('ticketMovieYear');
  
  if (ticketMovieTitle) ticketMovieTitle.textContent = title;
  if (ticketMovieYear) ticketMovieYear.textContent = new Date().getFullYear();
  
  // Set minimum date to today
  const ticketDate = document.getElementById('ticketDate');
  const today = new Date().toISOString().split('T')[0];
  if (ticketDate) {
    ticketDate.setAttribute('min', today);
    ticketDate.value = today;
    currentTicketSelection.date = today; // Set initial date
  }
  
  // Generate seats
  generateSeats();
  
  // Reset other selections
  currentTicketSelection.screen = '';
  currentTicketSelection.time = '';
  currentTicketSelection.seat = '';
  
  // Clear previous selections visually
  document.querySelectorAll('.time-slot.selected').forEach(s => s.classList.remove('selected'));
  document.querySelectorAll('.seat.selected').forEach(s => s.classList.remove('selected'));
  const screenSelect = document.getElementById('ticketScreen');
  if (screenSelect) screenSelect.value = '';
  const seatDisplay = document.getElementById('selectedSeatDisplay');
  if (seatDisplay) seatDisplay.textContent = 'None';
  
  if (ticketModal) {
    ticketModal.classList.add('show');
  }
}

function generateSeats() {
  const seatMap = document.getElementById('seatMap');
  if (!seatMap) return;
  
  seatMap.innerHTML = '';
  const rows = ['A', 'B', 'C', 'D', 'E'];
  const seatsPerRow = 8;
  
  // Randomly occupy some seats for demo
  const occupiedSeats = new Set();
  for (let i = 0; i < 10; i++) {
    const randomRow = rows[Math.floor(Math.random() * rows.length)];
    const randomSeat = Math.floor(Math.random() * seatsPerRow) + 1;
    occupiedSeats.add(`${randomRow}${randomSeat}`);
  }
  
  rows.forEach(row => {
    for (let i = 1; i <= seatsPerRow; i++) {
      const seatId = `${row}${i}`;
      const seat = document.createElement('button');
      seat.type = 'button';
      seat.className = 'seat';
      seat.textContent = seatId;
      seat.dataset.seat = seatId;
      
      if (occupiedSeats.has(seatId)) {
        seat.classList.add('occupied');
        seat.disabled = true;
      } else {
        seat.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          selectSeat(seatId);
        });
      }
      
      seatMap.appendChild(seat);
    }
  });
}

function selectSeat(seatId) {
  // Remove previous selection
  document.querySelectorAll('.seat.selected').forEach(s => s.classList.remove('selected'));
  
  // Select new seat
  const seatBtn = document.querySelector(`[data-seat="${seatId}"]`);
  if (seatBtn) {
    seatBtn.classList.add('selected');
    currentTicketSelection.seat = seatId;
    
    const display = document.getElementById('selectedSeatDisplay');
    if (display) display.textContent = seatId;
  }
}

function initTicketModal() {
  const ticketModal = document.getElementById('ticketModal');
  const ticketModalClose = document.getElementById('ticketModalClose');
  const ticketConfirmBtn = document.getElementById('ticketConfirmBtn');
  const ticketDate = document.getElementById('ticketDate');
  const ticketScreen = document.getElementById('ticketScreen');
  
  // Close modal
  if (ticketModalClose) {
    ticketModalClose.addEventListener('click', () => {
      if (ticketModal) ticketModal.classList.remove('show');
    });
  }
  
  // Close on outside click
  if (ticketModal) {
    ticketModal.addEventListener('click', (e) => {
      if (e.target === ticketModal) {
        ticketModal.classList.remove('show');
      }
    });
  }
  
  // Time slot selection
  document.querySelectorAll('.time-slot').forEach(slot => {
    slot.type = 'button';
    slot.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
      slot.classList.add('selected');
      currentTicketSelection.time = slot.dataset.time;
    });
  });
  
  // Date selection
  if (ticketDate) {
    ticketDate.addEventListener('change', (e) => {
      currentTicketSelection.date = e.target.value;
    });
  }
  
  // Screen selection
  if (ticketScreen) {
    ticketScreen.addEventListener('change', (e) => {
      currentTicketSelection.screen = e.target.value;
    });
  }
  
  // Confirm and add to cart
  if (ticketConfirmBtn) {
    ticketConfirmBtn.addEventListener('click', () => {
      // Validate selections
      if (!currentTicketSelection.date) {
        showToast('Please select a date', true);
        return;
      }
      if (!currentTicketSelection.screen) {
        showToast('Please select a screen', true);
        return;
      }
      if (!currentTicketSelection.time) {
        showToast('Please select a time', true);
        return;
      }
      if (!currentTicketSelection.seat) {
        showToast('Please select a seat', true);
        return;
      }
      
      // Add to cart with all selections
      cartItems.push({
        title: currentTicketSelection.title,
        img: currentTicketSelection.img,
        cardImage: currentTicketSelection.img,
        price: 9.99,
        date: currentTicketSelection.date,
        screen: currentTicketSelection.screen,
        time: currentTicketSelection.time,
        seat: currentTicketSelection.seat
      });
      
      cartCount = cartItems.length;
      updateCartDisplay();
      renderCartModal();
      showToast(currentTicketSelection.title + " added to cart");
      
      // Save to localStorage
      localStorage.setItem('cartItems', JSON.stringify(cartItems));
      const currentUser = localStorage.getItem('currentUser');
      if (currentUser) {
        localStorage.setItem('cart_' + currentUser, JSON.stringify(cartItems));
      }
      
      // Close modal
      if (ticketModal) ticketModal.classList.remove('show');
    });
  }
}

// Initialize cart on page load
document.addEventListener("DOMContentLoaded", () => {
  initTicketModal();
  setupCart();
  
  // Sliding navbar background effect
  const navlinks = document.querySelector('.navlinks');
  if (navlinks) {
      const navItems = navlinks.querySelectorAll('a');
      let slidingBg = navlinks.querySelector('.sliding-bg');
      
      // Create sliding background element if it doesn't exist
      if (!slidingBg) {
          slidingBg = document.createElement('div');
          slidingBg.className = 'sliding-bg';
          navlinks.appendChild(slidingBg);
      }
      
      navItems.forEach((item, index) => {
          item.addEventListener('mouseenter', function() {
              const itemRect = this.getBoundingClientRect();
              const navRect = navlinks.getBoundingClientRect();
              const left = itemRect.left - navRect.left;
              const width = itemRect.width;
              
              slidingBg.style.left = left + 'px';
              slidingBg.style.width = width + 'px';
              slidingBg.style.opacity = '1';
          });
          
          item.addEventListener('mouseleave', function() {
              // Don't hide immediately, let it stay for smooth transition
              setTimeout(() => {
                  if (!navlinks.matches(':hover')) {
                      slidingBg.style.opacity = '0';
                  }
              }, 100);
          });
      });
      
      // Hide when leaving navlinks container
      navlinks.addEventListener('mouseleave', function() {
          slidingBg.style.opacity = '0';
      });
  }
});
</script>

<script>
// Jelly Balls Animation
const footer = document.getElementById("footer");
const CAN_MOVE = window.innerWidth > 700;

function createTrail(x, y) {
  const t = document.createElement("div");
  t.className = "trail";
  t.style.left = x + "px";
  t.style.top = y + "px";
  footer.appendChild(t);

  setTimeout(() => (t.style.opacity = "0"), 20);
  setTimeout(() => t.remove(), 500);
}

// Review System
let selectedMovieRating = 0;
let selectedTheatreRating = 0;

// Star rating input styling
const starInputStyle = document.createElement('style');
starInputStyle.textContent = `
  .star-input, .theatre-star-input {
    color: rgba(255, 255, 255, 0.3);
    transition: all 0.2s ease;
  }
  .star-input:hover, .theatre-star-input:hover,
  .star-input.active, .theatre-star-input.active {
    color: #ffd700;
    transform: scale(1.2);
  }
`;
document.head.appendChild(starInputStyle);

// Initialize review system
function initReviewSystem() {
  const currentUser = localStorage.getItem('currentUser');
  
  // Show review forms container only if user is logged in
  if (currentUser) {
    const addReviewsContainer = document.getElementById('addReviewsContainer');
    if (addReviewsContainer) addReviewsContainer.style.display = 'block';
  }
  
  // Add hover effects to submit buttons
  const submitBtns = document.querySelectorAll('#submitReviewBtn, #submitTheatreReviewBtn');
  submitBtns.forEach(btn => {
    btn.addEventListener('mouseenter', () => {
      btn.style.background = 'rgba(255, 42, 109, 1)';
      btn.style.transform = 'translateY(-2px)';
      btn.style.boxShadow = '0 4px 15px rgba(255, 42, 109, 0.4)';
    });
    btn.addEventListener('mouseleave', () => {
      btn.style.background = 'rgba(255, 42, 109, 0.8)';
      btn.style.transform = 'translateY(0)';
      btn.style.boxShadow = 'none';
    });
  });
  
  // Movie review star rating
  const starInputs = document.querySelectorAll('.star-input');
  starInputs.forEach((star, index) => {
    star.addEventListener('click', () => {
      selectedMovieRating = parseInt(star.dataset.rating);
      starInputs.forEach((s, i) => {
        if (i < selectedMovieRating) {
          s.textContent = 'â˜…';
          s.classList.add('active');
        } else {
          s.textContent = 'â˜†';
          s.classList.remove('active');
        }
      });
    });
  });
  
  // Theatre review star rating
  const theatreStarInputs = document.querySelectorAll('.theatre-star-input');
  theatreStarInputs.forEach((star, index) => {
    star.addEventListener('click', () => {
      selectedTheatreRating = parseInt(star.dataset.rating);
      theatreStarInputs.forEach((s, i) => {
        if (i < selectedTheatreRating) {
          s.textContent = 'â˜…';
          s.classList.add('active');
        } else {
          s.textContent = 'â˜†';
          s.classList.remove('active');
        }
      });
    });
  });
  
  // Submit movie review
  const submitReviewBtn = document.getElementById('submitReviewBtn');
  if (submitReviewBtn) {
    submitReviewBtn.addEventListener('click', () => {
      if (!currentUser) {
        showToast('Please log in to submit a review', true);
        return;
      }
      
      const movieName = document.getElementById('reviewMovieName').value.trim();
      const reviewText = document.getElementById('reviewText').value.trim();
      
      if (!movieName || !reviewText || selectedMovieRating === 0) {
        showToast('Please fill in all fields and select a rating', true);
        return;
      }
      
      const review = {
        id: Date.now(),
        userName: currentUser,
        movieName: movieName,
        rating: selectedMovieRating,
        text: reviewText,
        date: new Date().toISOString()
      };
      
      let reviews = JSON.parse(localStorage.getItem('movieReviews') || '[]');
      reviews.unshift(review);
      localStorage.setItem('movieReviews', JSON.stringify(reviews));
      
      document.getElementById('reviewMovieName').value = '';
      document.getElementById('reviewText').value = '';
      selectedMovieRating = 0;
      starInputs.forEach(s => {
        s.textContent = 'â˜†';
        s.classList.remove('active');
      });
      
      loadMovieReviews();
      showToast('Review submitted successfully!');
    });
  }
  
  // Submit theatre review
  const submitTheatreReviewBtn = document.getElementById('submitTheatreReviewBtn');
  if (submitTheatreReviewBtn) {
    submitTheatreReviewBtn.addEventListener('click', () => {
      if (!currentUser) {
        showToast('Please log in to submit a review', true);
        return;
      }
      
      const theatreName = document.getElementById('theatreName').value.trim();
      const theatreLocation = document.getElementById('theatreLocation').value.trim();
      const reviewText = document.getElementById('theatreReviewText').value.trim();
      
      if (!theatreName || !theatreLocation || !reviewText || selectedTheatreRating === 0) {
        showToast('Please fill in all fields and select a rating', true);
        return;
      }
      
      const review = {
        id: Date.now(),
        userName: currentUser,
        theatreName: theatreName,
        location: theatreLocation,
        rating: selectedTheatreRating,
        text: reviewText,
        date: new Date().toISOString()
      };
      
      let reviews = JSON.parse(localStorage.getItem('theatreReviews') || '[]');
      reviews.unshift(review);
      localStorage.setItem('theatreReviews', JSON.stringify(reviews));
      
      document.getElementById('theatreName').value = '';
      document.getElementById('theatreLocation').value = '';
      document.getElementById('theatreReviewText').value = '';
      selectedTheatreRating = 0;
      theatreStarInputs.forEach(s => {
        s.textContent = 'â˜†';
        s.classList.remove('active');
      });
      
      loadTheatreReviews();
      showToast('Theatre review submitted successfully!');
    });
  }
  
  loadMovieReviews();
  loadTheatreReviews();
}

function loadMovieReviews() {
  const reviewsGrid = document.getElementById('movieReviewsGrid');
  if (!reviewsGrid) return;
  
  const userReviews = JSON.parse(localStorage.getItem('movieReviews') || '[]');
  
  // Store existing static reviews only once on first load
  if (!reviewsGrid.dataset.staticReviewsStored) {
    reviewsGrid.dataset.staticReviews = reviewsGrid.innerHTML;
    reviewsGrid.dataset.staticReviewsStored = 'true';
  }
  
  const existingReviews = reviewsGrid.dataset.staticReviews || '';
  
  if (userReviews.length > 0) {
    const userReviewsHTML = userReviews.map(review => {
      const stars = 'â˜…'.repeat(review.rating) + 'â˜†'.repeat(5 - review.rating);
      return `
        <div class="review-card">
          <div class="review-header">
            <img src="images/user-avatar.png" alt="User" onerror="this.src='images/dune.jpg'">
          </div>
          <div class="review-content">
            <div class="reviewer-info">
              <h4><i class="fas fa-user"></i> ${review.userName}</h4>
              <div class="star-rating">${stars}</div>
            </div>
            <p class="review-text">${review.text}</p>
            <span class="review-movie"><i class="fas fa-film"></i> ${review.movieName}</span>
          </div>
        </div>
      `;
    }).join('');
    
    // Append user reviews AFTER existing reviews
    reviewsGrid.innerHTML = existingReviews + userReviewsHTML;
  } else {
    reviewsGrid.innerHTML = existingReviews;
  }
}

function loadTheatreReviews() {
  const reviewsGrid = document.getElementById('theatreReviewsGrid');
  if (!reviewsGrid) return;
  
  const userReviews = JSON.parse(localStorage.getItem('theatreReviews') || '[]');
  
  // Store existing static reviews only once on first load
  if (!reviewsGrid.dataset.staticReviewsStored) {
    reviewsGrid.dataset.staticReviews = reviewsGrid.innerHTML;
    reviewsGrid.dataset.staticReviewsStored = 'true';
  }
  
  const existingReviews = reviewsGrid.dataset.staticReviews || '';
  
  if (userReviews.length > 0) {
    const userReviewsHTML = userReviews.map(review => {
      const stars = 'â˜…'.repeat(review.rating) + 'â˜†'.repeat(5 - review.rating);
      const ratingValue = (review.rating / 5 * 5).toFixed(1);
      return `
        <div class="theatre-review-card">
          <div class="theatre-info">
            <h3><i class="fas fa-theater-masks"></i> ${review.theatreName}</h3>
            <div class="theatre-location"><i class="fas fa-map-marker-alt"></i> ${review.location}</div>
          </div>
          <div class="theatre-rating">
            <div class="star-rating">${stars}</div>
            <span class="rating-text">${ratingValue}/5</span>
          </div>
          <p class="theatre-review-text">${review.text}</p>
          <div class="reviewer-name"><i class="fas fa-pen"></i> ${review.userName}</div>
        </div>
      `;
    }).join('');
    
    // Append user reviews AFTER existing reviews
    reviewsGrid.innerHTML = existingReviews + userReviewsHTML;
  } else {
    reviewsGrid.innerHTML = existingReviews;
  }
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', initReviewSystem);

const balls = [
  {
    el: document.getElementById("bubble1"),
    x: 60,
    y: 80,
    vx: 2.1,
    vy: 1.9,
  },
  {
    el: document.getElementById("bubble2"),
    x: 180,
    y: 40,
    vx: -2.3,
    vy: 1.7,
  },
];

if (CAN_MOVE && footer) {
  footer.addEventListener("mousemove", (e) => {
    const rect = footer.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    createTrail(x, y);
  });

  function animate() {
    const fw = footer.clientWidth;
    const fh = footer.clientHeight;

    balls.forEach(b => {
      if (!b.el) return;
      const size = b.el.clientWidth;

      b.x += b.vx;
      b.y += b.vy;

      // Bounce X
      if (b.x <= 0 || b.x + size >= fw) {
        b.vx *= -1;
        b.el.style.transform = "scaleX(1.18)";
        setTimeout(() => (b.el.style.transform = "scale(1)"), 120);
      }

      // Bounce Y
      if (b.y <= 0 || b.y + size >= fh) {
        b.vy *= -1;
        b.el.style.transform = "scaleY(1.18)";
        setTimeout(() => (b.el.style.transform = "scale(1)"), 120);
      }

      // Move
      b.el.style.left = b.x + "px";
      b.el.style.top = b.y + "px";

      // Trail
      createTrail(b.x + size / 2, b.y + size / 2);
    });

    requestAnimationFrame(animate);
  }

  animate();
} else {
  // Static positioning for mobile
  if (balls[0].el) {
    balls[0].el.style.left = "20px";
    balls[0].el.style.bottom = "20px";
  }
  if (balls[1].el) {
    balls[1].el.style.right = "20px";
    balls[1].el.style.bottom = "20px";
  }
}

// Offline detection - redirect to error page
window.addEventListener('offline', () => {
  window.location.href = 'error.html';
});

// Check connection on load
if (!navigator.onLine) {
  window.location.href = 'error.html';
}
</script>

</body>
</html>
